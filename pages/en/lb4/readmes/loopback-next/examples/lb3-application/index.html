<!DOCTYPE html>
<head>
    

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="keywords" content=" ">
  <title>@loopback/example-lb3-application | LoopBack Documentation</title>
  <link rel="stylesheet" href="/css/syntax.css">

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/modern-business.css">
    <link rel="stylesheet" href="/css/lavish-bootstrap.css">
    <link rel="stylesheet" href="/css/customstyles.css">
    <link rel="stylesheet" href="/css/theme-v4.css">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150726441-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150726441-2');
</script>


    <!-- github star button -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>


    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
    <script src="/js/toc.js"></script>
    <script src="/js/customscripts.js"></script>

    <link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->


    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand no_icon" href="/doc/index.html">
              <img class="no_icon" style="width:147px;" src="/images/branding/logo/white/loopback.svg">&nbsp;<span class="projectTitle"></span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Docs<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://loopback.io/doc/en/lb4/apidocs.index.html" target="_blank">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="http://apidocs.loopback.io" target="_blank">LoopBack 3.x</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">View<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is / -->
                          
                            <li><a href="/">LoopBack Overview</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/lb4/ -->
                          
                            <li><a href="/doc/en/lb4/">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/lb3/ -->
                          
                            <li><a href="/doc/en/lb3/">LoopBack 3.x</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/lb2/ -->
                          
                            <li><a href="/doc/en/lb2/">LoopBack 2.x</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/community/ -->
                          
                            <li><a href="/doc/en/community/">Community projects</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/contrib/ -->
                          
                            <li><a href="/doc/en/contrib/">Contributing to LoopBack</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/en/sec/ -->
                          
                            <li><a href="/doc/en/sec/">Security advisories</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://github.com/strongloop/loopback.io" target="_blank">Docs Github Repo</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs-announcements" target="_blank">Announcements Mailing List</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs" target="_blank">Developer Forum</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw" target="_blank">LoopBack on Slack</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://stackoverflow.com/questions/tagged/strongloop+or+loopback4+or+loopbackjs" target="_blank">LoopBack on Stack Overflow</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is  -->
                          
                            <li><a href="https://strongloop.com/strongblog/tag_LoopBack.html" target="_blank">StrongLoop Blog - LoopBack</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Translations<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/es/lb2/ -->
                          
                            <li><a href="/doc/es/lb2/">Español (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/es/lb4/ -->
                          
                            <li><a href="/doc/es/lb4/">Español (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/fr/lb2/ -->
                          
                            <li><a href="/doc/fr/lb2/">Français (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/fr/lb4/ -->
                          
                            <li><a href="/doc/fr/lb4/">Français (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ko/lb2/ -->
                          
                            <li><a href="/doc/ko/lb2/">한국어 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ko/lb3/ -->
                          
                            <li><a href="/doc/ko/lb3/">한국어 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/pt-br/lb2/ -->
                          
                            <li><a href="/doc/pt-br/lb2/">Português (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/pt-br/lb4/ -->
                          
                            <li><a href="/doc/pt-br/lb4/">Português (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ja/lb2/ -->
                          
                            <li><a href="/doc/ja/lb2/">日本語 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ja/lb3/ -->
                          
                            <li><a href="/doc/ja/lb3/">日本語 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ja/lb4/ -->
                          
                            <li><a href="/doc/ja/lb4/">日本語 (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/ru/lb2/ -->
                          
                            <li><a href="/doc/ru/lb2/">Pусский (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/zh/lb2/ -->
                          
                            <li><a href="/doc/zh/lb2/">中文 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/loopback-next/examples/lb3-application/ .... folderitem.url is /doc/zh/lb4/ -->
                          
                            <li><a href="/doc/zh/lb4/">中文 (v4)</a></li>
                          
                        
                    </ul>
                </li>
                
                
                
                <li>
                    <form id="search" name="search" class="input-group lb-search" action="/search" method="GET">
                        <input type="text" class="form-control search-bar" placeholder="Search (powered by Watson)" name="q">
                        
                          <input type="hidden" name="sidebar" value="lb3_sidebar">
                        
                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-default" aria-label="search">
                              <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                            </button>
                        </div>
                      </form>
                </li>
            </ul>
        </div>
      </div>
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <nav class="col-md-3 sidebar-col">
          











<!-- NOTE: sidebar = site.data.sidebars.mydoc_sidebar.entries -->
<div class="sidebarTitle"><a href="index.html">LoopBack 3.x</a></div>
<ul id="mysidebar" class="nav-list">
  

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Installation.html">Installation</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installation-troubleshooting.html">Installation troubleshooting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="3.0-Release-Notes.html">3.0 Release Notes</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Migrating-to-3.0.html">Migrating apps to v3</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-core-concepts.html">LoopBack core concepts</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Routing.html">Routing</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-FAQ.html">LoopBack FAQ</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Glossary.html">Glossary</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="StrongLoop-Labs.html">StrongLoop Labs</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-with-LoopBack.html">Getting started with LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-a-simple-API.html">Create a simple API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Use-API-Explorer.html">Use API Explorer</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connect-your-API-to-a-data-source.html">Connect your API to a data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extend-your-API.html">Extend your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-static-web-page.html">Add a static web page</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-custom-Express-route.html">Add a custom Express route</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Next-steps.html">Next steps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Deploy-for-GDPR-readiness.html">Considerations for GDPR readiness</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-part-II.html">Getting started part II</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introducing-the-Coffee-Shop-Reviews-app.html">Introducing the Coffee Shop Reviews app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-data-source.html">Create new data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-models.html">Create new models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-model-relations.html">Define model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-access-controls.html">Define access controls</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-a-remote-hook.html">Define a remote hook</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-AngularJS-client.html">Create AngularJS client</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Learn-more.html">Learn more</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorials-and-examples.html">Tutorials and examples</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-an-application.html">Creating an application</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Environment-specific-configuration.html">Environment-specific configuration</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Versioning-your-API.html">Versioning your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Standard-project-structure.html">Standard project structure</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-data-sources.html">Defining data sources</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-database-schema-from-models.html">Creating a database schema from models</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data-sources.html">Data sources: advanced topics</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-database-transactions.html">Using database transactions</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Executing-native-SQL.html">Executing native SQL</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Building-a-connector.html">Building a connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-create-retrieve-update-and-delete-methods.html">Implementing CRUD methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-model-discovery.html">Implementing model discovery</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-auto-migration.html">Implementing auto-migration</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-models.html">Defining models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-the-model-generator.html">Using the model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Discovering-models-from-relational-databases.html">Discovering models from relational databases</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-models-from-unstructured-data.html">Creating models from unstructured data</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Customizing-models.html">Customizing models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Exposing-models-over-REST.html">Exposing models over REST</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Validating-model-data.html">Validating model data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-model-relations.html">Creating model relations</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-model-relations.html">Tutorial: model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="BelongsTo-relations.html">BelongsTo relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasOne-relations.html">HasOne relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasMany-relations.html">HasMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasManyThrough-relations.html">HasManyThrough relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasAndBelongsToMany-relations.html">HasAndBelongsToMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Polymorphic-relations.html">Polymorphic relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Querying-related-models.html">Querying related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Embedded-models-and-relations.html">Embedded models and relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Nested-queries.html">Nested queries</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Using-built-in-models.html">Using built-in models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extending-built-in-models.html">Extending built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Adding-remote-methods-to-built-in-models.html">Adding remote methods to built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-property-reference.html">Model property reference</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Built-in-models-REST-API.html">Built-in models REST API</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="PersistedModel-REST-API.html">PersistedModel REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Access-token-REST-API.html">Access token REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-REST-API.html">ACL REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-REST-API.html">Application REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-REST-API.html">Relation REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Role-REST-API.html">Role REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-REST-API.html">User REST API</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Attaching-models-to-data-sources.html">Attaching models to data sources</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Managing-users.html">Managing users</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Registering-users.html">Registering users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Logging-in-users.html">Logging in users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Partitioning-users-with-realms.html">Partitioning users with realms</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-management-example.html">User management example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Authentication-authorization-and-permissions.html">Authentication, authorization, and permissions</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introduction-to-User-model-authentication.html">Introduction to User model authentication</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Controlling-data-access.html">Controlling data access</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Making-authenticated-requests.html">Making authenticated requests</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-and-using-roles.html">Defining and using roles</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Accessing-related-models.html">Accessing related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-default-admin-user.html">Creating a default admin user</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Security-considerations.html">Security considerations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-access-control.html">Tutorial: access control</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Working-with-data.html">Working with data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-updating-and-deleting-data.html">Creating, updating, and deleting data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Querying-data.html">Querying data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Fields-filter.html">Fields filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Include-filter.html">Include filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Limit-filter.html">Limit filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Order-filter.html">Order filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Skip-filter.html">Skip filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Where-filter.html">Where filter</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data.html">Advanced topics: data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-server-sent-events.html">Realtime server-sent events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet.html">AngularJS Live Set</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet-Example.html">AngularJS Live Set example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-socket-io.html">Real-time apps AngularJS using socket.io</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-application-logic.html">Adding application logic</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-LoopBack-objects.html">Working with LoopBack objects</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-logic-to-models.html">Adding logic to models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-methods.html">Remote methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-hooks.html">Remote hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Operation-hooks.html">Operation hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connector-hooks.html">Connector hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Adding-application-logic.html">Tutorial: Application logic</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-boot-scripts.html">Defining boot scripts</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-mixins.html">Defining mixins</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-middleware.html">Defining middleware</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-example.html">Middleware example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-current-context.html">Using current context</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Events.html">Events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-promises.html">Using promises</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Running-and-debugging-apps.html">Running and debugging apps</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Setting-debug-strings.html">Setting debug strings</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-strong-error-handler.html">Using strong-error-handler</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Preparing-for-deployment.html">Preparing for deployment</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-on-Bluemix.html">Running LoopBack apps on Bluemix</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-components.html">LoopBack components</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OAuth-2.0.html">OAuth 2.0 component</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Push-notifications.html">Push notification component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-iOS-apps.html">Push notifications for iOS apps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-Android-apps.html">Push notifications for Android apps</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Storage-component.html">Storage component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-component-REST-API.html">Storage component REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-example.html">Storage component example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Third-party-login-using-Passport.html">Passport login component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Configuring-providers.json.html">Configuring providers.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-third-party-login.html">Tutorial: third-party login</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Synchronization.html">Synchronization component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Offline-Synchronization.html">Tutorial: Offline Synchronization</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Advanced-topics-sync.html">Advanced topics - sync</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-components.html">Creating components</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Command-line-tools.html">Command-line tools</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-generator.html">ACL generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="API-definition-generator.html">API definition generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-generator.html">Application generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Bluemix-config-generator.html">Bluemix configuration generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Boot-script-generator.html">Boot script generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Data-source-generator.html">Data source generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-generator.html">Middleware generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-generator.html">Model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Oracle-installer-command.html">Oracle installer command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Property-generator.html">Property generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Refresh-definitions-command.html">Refresh definitions command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-generator.html">Relation generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-method-generator.html">Remote method generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-generator.html">SOAP generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-generator.html">Swagger generator</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Client-SDKs.html">Client SDKs</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="iOS-SDK.html">iOS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="IOS-getting-started.html">Getting started with the iOS SDK</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Android-SDK.html">Android SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-android-getting-started.html">Getting started with the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-files-using-the-Android-SDK.html">Working with files using the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-using-Android-SDK.html">Push notifications using Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-the-LocalInstallation-class.html">Working with the LocalInstallation class</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="AngularJS-JavaScript-SDK.html">AngularJS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Angular-example-app.html">Angular example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-Grunt-plugin.html">AngularJS Grunt plugin</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Xamarin-SDK.html">Xamarin SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-client-API.html">Xamarin client API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-example-app.html">Xamarin example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-in-the-client.html">Isomorphic LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Running-LoopBack-in-the-browser.html">Running LoopBack in the browser</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-Browserify.html">Using Browserify</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Isomorphic-LoopBack-example.html">Isomorphic example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Connectors-reference.html">Connectors reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Memory-connector.html">Memory connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Database-connectors.html">Database connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cassandra-connector.html">Cassandra connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cloudant-connector.html">Cloudant connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Couchdb2-connector.html">CouchDB 2.x connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DashDB.html">DashDB</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-connector.html">DB2 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-iSeries-connector.html">DB2 for iSeries connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-for-z-OS.html">DB2 for z/OS</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="gRPC-connector.html">gRPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Informix.html">Informix connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MongoDB-connector.html">MongoDB connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MongoDB.html">MongoDB Connector Tutorial</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-MongoLab.html">Using MongoLab</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MySQL-connector.html">MySQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MySQL.html">MySQL Connector Tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OpenAPI-connector.html">OpenAPI connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Oracle-connector.html">Oracle connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installing-the-Oracle-connector.html">Installing the Oracle connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Oracle.html">Oracle connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="PostgreSQL-connector.html">PostgreSQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-PostgreSQL.html">PostgreSQL connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-connector.html">Redis connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="kv-redis-connector.html">Redis key-value connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Example-kv-connector.html">KV connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SQL-Server-connector.html">SQL Server connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Microsoft-SQL-Server.html">SQL Server connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SQLite3.html">SQLite3 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="zOSconnectEE.html">z/OS Connect Enterprise Edition connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Other-connectors.html">Other connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Email-connector.html">Email connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="JSON-RPC-connector.html">JSON RPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQLight-connector.html">MQ Light connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-connector.html">Push connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Remote-connector.html">Remote connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-connector-example.html">Remote connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-Remoting.html">Strong Remoting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="REST-connector.html">REST connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="REST-connector-example.html">REST connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SOAP-connector.html">SOAP connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-soap.html">Strong-soap</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-Connector-example.html">SOAP connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-SOAP.html">Connecting to SOAP web services</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-connector.html">Storage connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-connector.html">Swagger connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Community-connectors.html">Community connectors</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Project-layout-reference.html">Project layout reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="client-directory.html">client directory</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="common-directory.html">common directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-definition-JSON-file.html">Model definition JSON file</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-extension-file.html">Model extension file</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="package.json.html">package.json</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="server-directory.html">server directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="component-config.json.html">component-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="config.json.html">config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="datasources.json.html">datasources.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.json.html">middleware.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.development.json.html">middleware.development.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="model-config.json.html">model-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="server.js.html">server.js</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Node-reference.html">Node reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-types.html">LoopBack types</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Geotype.html">Geopoint type</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Valid-names-in-LoopBack.html">Valid names in LoopBack</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Basic-model-object.html">Basic model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connected-model-object.html">Connected model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Error-object.html">Error object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-middleware.html">LoopBack middleware</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Publish-subscribe-messaging.html">Publish-subscribe messaging</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-pub-sub.html">Strong Pub-sub</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-bridge.html">Pub-sub bridge</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQTT-adapter.html">MQTT adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-pub-sub-adapter.html">Redis pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Primus-pub-sub-adapter.html">Primus pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-example.html">Node pub-sub example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-Loopback-example.html">LoopBack pub-sub example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="All-tags.html">All tags</a>
    
      
  </li>
  



</ul>

        </nav>
        <!-- Content Column -->
        <div class="col-md-9">
            
  <div class="v3notice">
LoopBack 3 has reached end of life. We are no longer accepting pull requests or providing 
support for community users. The only exception is fixes for critical bugs and security 
vulnerabilities provided as part of support for IBM API Connect customers.
We urge all LoopBack 3 users to migrate their applications to LoopBack 4 as soon as possible. 
Learn more about
<a href="https://loopback.io/doc/en/contrib/Long-term-support.html">LoopBack's long term support policy.</a>
</div>


<div class="post-header">
   <h1 class="post-title-main">@loopback/example-lb3-application</h1>
   
     
       <a target="_blank" href="https://github.com/strongloop/loopback.io/blob/gh-pages/pages/pages/en/lb4/readmes/loopback-next/examples/lb3-application/.md" class="githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit this page</a>
   
</div>

<div class="post-content">


  




 
   
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
;$(function() {
  var level = parseInt(3, 10);
  if (level === 1) {level = 'h2'}
  if (level === 2) {level = 'h2,h3'}
  if (level === 3) {level = 'h2,h3,h4'}
  if (level === 4) {level = 'h2,h3,h4,h5'}

  // Add a new level for changelog files which use h1,h2,h3
  if (level === 0) {level = 'h1,h2,h3,h4,h5'}

  var toc = $('#toc')

  toc.toc({minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: level})

  /* this offset helps with the space taken up by the floating toolbar */
  toc.on('click', 'a', function() {
    var target = $(this.getAttribute('href')),
      scroll_target = target.offset().top

    $(window).scrollTop(scroll_target - 10)
    return false
  })
  .on('click', '.toc-expand-button', function() {
    toc.find('> ul').slideToggle('fast');
  })
})
</script>

<div id="toc">
  <span class="toc-title">Page Contents</span>
  <button type="button" class="btn btn-link toc-expand-button">
    <i class="fa fa-bars"></i>
  </button>
</div>

 

    <h1 id="loopbackexample-lb3-application">@loopback/example-lb3-application</h1>

<p>This example demonstrates how to mount your existing LoopBack 3 (LB3)
application on a new LoopBack 4 (LB4) project and how to move the middleware
from the LB3 application to a common location so that both the LB3 and LB4
applications can use them.</p>

<h2 id="mounting-lb3-app-on-lb4-app">Mounting LB3 app on LB4 app</h2>

<ol>
  <li>
    <p>Create a new LoopBack 4 project using <code class="language-plaintext highlighter-rouge">lb4 app</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ lb4 app
</code></pre></div>    </div>

    <p>Fill out the prompts as they fit your project and leave all features enabled.</p>
  </li>
  <li>
    <p>Create a new directory <code class="language-plaintext highlighter-rouge">lb3app</code> from the root of your LoopBack 4 application
and copy your existing LoopBack 3 application there. You should end up with
the following directory layout:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lb3app/
  # LoopBack 3 application in JavaScript
  common/
    models/
      # LB3 model files
  server/
    boot/
      # LB3 boot scripts
public/
  # front-end assets (LB4 way)
src/
  # LoopBack 4 application in TypeScript
</code></pre></div>    </div>
  </li>
  <li>
    <p>Move LB3 dependencies to the main package.json file and remove
<code class="language-plaintext highlighter-rouge">lb3app/package.json</code>, <code class="language-plaintext highlighter-rouge">lb3app/node_modules/</code>, and<code class="language-plaintext highlighter-rouge">lb3app/package-lock.json</code>,
if it exists. Typically you will need to add the following entries, plus any
connectors or components you are using in your LB3 application.</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"compression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.7.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.8.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"helmet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.16.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"loopback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.25.1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"loopback-boot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.3.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>

    <p>Note: make sure to use <code class="language-plaintext highlighter-rouge">loopback-boot@3.2.1</code> or higher.</p>

    <p>Run <code class="language-plaintext highlighter-rouge">npm install</code> from the root of your LB4 project to install the LB3
dependencies.</p>
  </li>
  <li>
    <p>Disable error handling in your LB3 app, leave it for the new LB4 app.</p>

    <ul>
      <li>Remove <code class="language-plaintext highlighter-rouge">lb3app/server/middleware.development.json</code></li>
      <li>Edit <code class="language-plaintext highlighter-rouge">lb3app/server/middleware.json</code> and remove the following two entries:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">final</code> » <code class="language-plaintext highlighter-rouge">loopback#urlNotFound</code></li>
          <li><code class="language-plaintext highlighter-rouge">final:after</code> » <code class="language-plaintext highlighter-rouge">strong-error-handler</code></li>
        </ul>
      </li>
      <li>Remove <code class="language-plaintext highlighter-rouge">strong-error-handler</code> from <code class="language-plaintext highlighter-rouge">package.json</code> dependencies.</li>
      <li>In <code class="language-plaintext highlighter-rouge">lb3app/server/config.json</code>, if <code class="language-plaintext highlighter-rouge">"handleErrors": false</code> is in
<code class="language-plaintext highlighter-rouge">remoting</code>, move it to <code class="language-plaintext highlighter-rouge">rest</code>.</li>
    </ul>
  </li>
  <li>
    <p>Move your front-end files from <code class="language-plaintext highlighter-rouge">lb3app/client</code> to <code class="language-plaintext highlighter-rouge">public/</code> directory and
disable static assets in your LB3 app by removing the following entry in
<code class="language-plaintext highlighter-rouge">lb3app/server/middleware.json</code>:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">files</code> » <code class="language-plaintext highlighter-rouge">loopback#static</code></li>
    </ul>

    <p>Also remove <code class="language-plaintext highlighter-rouge">lb3app/server/boot/root.js</code>, since the main page will be served
by the LoopBack 4 project.</p>
  </li>
  <li>
    <p>Remove <code class="language-plaintext highlighter-rouge">lb3app/server/component-config.json</code> to disable LoopBack 3’s
explorer. The LoopBack 4 explorer will be used instead.</p>
  </li>
  <li>
    <p>Install and configure <code class="language-plaintext highlighter-rouge">@loopback/booter-lb3app</code> to boot and mount the LB3
application:</p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">npm install --save @loopback/booter-lb3app</code></p>
      </li>
      <li>
        <p>Import the component at the top of your <code class="language-plaintext highlighter-rouge">src/application.ts</code> file.</p>

        <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Lb3AppBooterComponent</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@loopback/booter-lb3app</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Register the component in Application’s constructor:</p>

        <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">Lb3AppBooterComponent</span><span class="p">);</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<p>Start the new LB4 application</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm start
Server is running at http://127.0.0.1:3000
</code></pre></div></div>

<p>Open the URL printed to console to view your front-end served from <code class="language-plaintext highlighter-rouge">public</code>
directory or go to <code class="language-plaintext highlighter-rouge">http://127.0.0.1:3000/explorer</code> to explore the REST API.</p>

<p>The LB3 application is now successfully mounted on a LB4 application, but we can
further optimize the setup so that only the bare neccessary artifacts from the
LoopBack 3 application remain. This includes moving almost all of the middleware
to a common location so that they are shared by both the LoopBack 3 and the
LoopBack 4 apps.</p>

<h2 id="migrating-express-middleware-from-lb3-app">Migrating Express middleware from LB3 app</h2>

<ol>
  <li>
    <p>Update config.json</p>

    <p>First off, edit the LB3 app’s <code class="language-plaintext highlighter-rouge">config.json</code> file.</p>

    <p>Remove these properties, as they are not required anymore:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0.0"</span><span class="err">,</span><span class="w">
</span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="err">,</span><span class="w">
</span></code></pre></div>    </div>

    <p>Change <code class="language-plaintext highlighter-rouge">restApiRoot</code> to <code class="language-plaintext highlighter-rouge">/</code> or any path where you would like the LB3 app to
be mounted; that’s relative to the LB4 app’s REST API path, which defaults to
<code class="language-plaintext highlighter-rouge">/api</code>.</p>

    <p>And then add <code class="language-plaintext highlighter-rouge">"handleUnknownPaths": false</code> to the <code class="language-plaintext highlighter-rouge">rest</code> property, this will
prevent the LB3 REST api from sending a 404 response for requests it cannot
handle.</p>

    <p>The <code class="language-plaintext highlighter-rouge">config.json</code> file should now look like this:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"restApiRoot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remoting"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"context"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handleErrors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"handleUnknownPaths"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"normalizeHttpPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"xml"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"strict"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100kb"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"urlencoded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"extended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100kb"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Configure the base Express app</p>

    <p>We will be using a base Express app (<code class="language-plaintext highlighter-rouge">src/server.ts</code>) for mounting the LB4
app as described in
“<a href="https://loopback.io/doc/en/lb4/express-with-lb4-rest-tutorial.html">Creating an Express Application with LoopBack REST API</a>”
guide.</p>

    <p>Migrate the LB3 app’s middleware from its <code class="language-plaintext highlighter-rouge">middleware.json</code> file to this
Express app, except the one from the <code class="language-plaintext highlighter-rouge">routes</code> phase (there is a
<a href="https://github.com/strongloop/loopback-next/issues/4181">pending task</a> to
complete the support for this middleware).</p>

    <p>Each root property in the <code class="language-plaintext highlighter-rouge">middleware.json</code> object represents a middleware
phase, extract the relevant middleware and load them in the Express app in
order.</p>

    <p>An entry like <code class="language-plaintext highlighter-rouge">"compression": {}</code> translates to <code class="language-plaintext highlighter-rouge">compression()</code>, and
<code class="language-plaintext highlighter-rouge">loopback#favicon</code> translates to <code class="language-plaintext highlighter-rouge">loopback.favicon()</code> in TypeScript. For more
details about <code class="language-plaintext highlighter-rouge">middleware.json</code>, refer to
<a href="https://loopback.io/doc/en/lb3/middleware.json.html">its documentation</a>.</p>

    <p>The <code class="language-plaintext highlighter-rouge">middleware.json</code> file should look like this now:</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
 <span class="dl">"</span><span class="s2">routes</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
   <span class="dl">"</span><span class="s2">loopback#rest</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
     <span class="dl">"</span><span class="s2">paths</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
       <span class="dl">"</span><span class="s2">${restApiRoot}</span><span class="dl">"</span>
     <span class="p">]</span>
   <span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>

    <p>The middleware mounted in the Express app will be shared by both LB3 and LB4
apps.</p>

    <p>Move any static files from the LB3 app to the <code class="language-plaintext highlighter-rouge">public</code> directory of the
Express app. Move any non-REST routes defined anywhere in the LB3 app to the
Express app.</p>

    <p>This is what the <code class="language-plaintext highlighter-rouge">src/server.ts</code> file will look like:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">ApplicationConfig</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@loopback/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">once</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">events</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">Response</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">http</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">AddressInfo</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">net</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">path</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Replace CoffeeShopApplication with the name of your application</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">CoffeeShopApplication</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./application</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">loopback</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">loopback</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">compression</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">compression</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">helmet</span><span class="dl">'</span><span class="p">);</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">ExpressServer</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">app</span><span class="p">:</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Application</span><span class="p">;</span>
  <span class="k">public</span> <span class="k">readonly</span> <span class="nx">lbApp</span><span class="p">:</span> <span class="nx">CoffeeShopApplication</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">server</span><span class="p">?:</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Server</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">url</span><span class="p">:</span> <span class="nb">String</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">:</span> <span class="nx">ApplicationConfig</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CoffeeShopApplication</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>

    <span class="c1">// Middleware migrated from LoopBack 3</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">loopback</span><span class="p">.</span><span class="nx">favicon</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">compression</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>

    <span class="c1">// Mount the LB4 REST API</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api</span><span class="dl">'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">requestHandler</span><span class="p">);</span>

    <span class="c1">// Custom Express routes</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/ping</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">_req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Serve static files in the public folder</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="k">static</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">../public</span><span class="dl">'</span><span class="p">)));</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">async</span> <span class="nx">boot</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">boot</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">async</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">restServer</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">port</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">host</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">restServer</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">host</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">127.0.0.1</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">server</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="nx">host</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">once</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">server</span><span class="p">,</span> <span class="dl">'</span><span class="s1">listening</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">AddressInfo</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">address</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="s2">`http://</span><span class="p">${</span><span class="nx">add</span><span class="p">.</span><span class="nx">address</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">add</span><span class="p">.</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">async</span> <span class="nx">stop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">server</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">once</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">server</span><span class="p">,</span> <span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">server</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Update <code class="language-plaintext highlighter-rouge">src/index.ts</code></p>

    <p>The Express app will replace the <code class="language-plaintext highlighter-rouge">CoffeeShopApplication</code> as the entry point
for the program, modify the <code class="language-plaintext highlighter-rouge">src/index.ts</code> file accordingly.</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">ApplicationConfig</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@loopback/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">ExpressServer</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./server</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="p">{</span><span class="nx">ApplicationConfig</span><span class="p">,</span> <span class="nx">ExpressServer</span><span class="p">};</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">options</span><span class="p">:</span> <span class="nx">ApplicationConfig</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExpressServer</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">server</span><span class="p">.</span><span class="nx">boot</span><span class="p">();</span>
  <span class="k">await</span> <span class="nx">server</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Server is running at </span><span class="p">${</span><span class="nx">server</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Next, modify the application config in <code class="language-plaintext highlighter-rouge">src/index.ts</code> file to prevent the LB4
app from listening, by adding <code class="language-plaintext highlighter-rouge">listenOnStart: false</code> in <code class="language-plaintext highlighter-rouge">config.rest</code> object.
The <code class="language-plaintext highlighter-rouge">config</code> object should now look like this:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rest</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">port</span><span class="p">:</span> <span class="o">+</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">??</span> <span class="mi">3000</span><span class="p">),</span>
    <span class="na">host</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HOST</span> <span class="o">??</span> <span class="dl">'</span><span class="s1">localhost</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">openApiSpec</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">// useful when used with OpenAPI-to-GraphQL to locate your application</span>
      <span class="na">setServersFromRequest</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">listenOnStart</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>    </div>

    <p>Then, in the <code class="language-plaintext highlighter-rouge">bootOptions</code> of the <code class="language-plaintext highlighter-rouge">CoffeeShopApplication</code> class, add the
<code class="language-plaintext highlighter-rouge">lb3app</code> to configure the path of the LB3 APIs.</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">lb3app</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fullApp</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">this.bootOptions</code> should now look like this:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">bootOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// Customize ControllerBooter Conventions here</span>
    <span class="na">dirs</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">controllers</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">extensions</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">.controller.js</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">nested</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">lb3app</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fullApp</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>Start the app:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm start
</code></pre></div></div>

<p>Load <a href="http://localhost:3000/">http://localhost:3000/</a> on your browser. This will
load the Express app, with mounted LB3 and LB4 applications.</p>

<h2 id="running-lb3-tests-from-lb4">Running LB3 tests from LB4</h2>

<p>You can run tests in an LoopBack 3 application from the LoopBack 4 application
it mounted on with command <code class="language-plaintext highlighter-rouge">npm test</code>.</p>

<p>We want the LoopBack 3 tests to use the LoopBack 4 server rather than the
LoopBack 3 application. The following guide shows how to run</p>

<ul>
  <li>acceptance-level tests making HTTP calls to invoke application logic. e.g.
<code class="language-plaintext highlighter-rouge">POST /users/login</code></li>
  <li>integration-level tests that are using JS API to call application logic. e.g.
<code class="language-plaintext highlighter-rouge">MyModel.create()</code></li>
</ul>

<h3 id="adding-lb3-test-path-in-command">Adding LB3 Test Path in Command</h3>

<p>In order to run LoopBack 3’s tests from their current folder, add LB3 tests’
path to <code class="language-plaintext highlighter-rouge">test</code> entry in package.json:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">"test": "lb-mocha \"dist/**tests**/*_/_.js\" \"lb3app/test/*.js\""</code></li>
</ul>

<p>In this case, the test folder is
<a href="https://github.com/strongloop/loopback-next/tree/spike/lb3test/examples/lb3-application/lb3app/test"><code class="language-plaintext highlighter-rouge">/lb3app/test</code></a>
from the root of the LoopBack 4 project.</p>

<p>This will run LoopBack 4 tests first then LoopBack 3 tests.</p>

<p><em>To emphasize the setup steps and separate them from the test case details, all
the comprehensive test code are extracted into function <code class="language-plaintext highlighter-rouge">runTests</code>.</em></p>

<h3 id="running-acceptance-tests">Running Acceptance Tests</h3>

<p>First, move any LoopBack 3 test dependencies to <code class="language-plaintext highlighter-rouge">package.json</code>’s devDependencies
and run:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div></div>

<p>In your test file:</p>

<ol>
  <li>When launch the Express server</li>
</ol>

<ul>
  <li>
    <p>1.1 Update to use the Express server when doing requests:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// can use lb4's testlab's supertest as the dependency is already installed</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">supertest</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@loopback/testlab</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">assert</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">should</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">should</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">ExpressServer</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../../dist/server</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">jsonForExpressApp</span><span class="p">(</span><span class="nx">verb</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// use the express server, it mounts LoopBack 3 apis to</span>
  <span class="c1">// base path '/api'</span>
  <span class="k">return</span> <span class="nx">supertest</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">server</span><span class="p">)</span>
    <span class="p">[</span><span class="nx">verb</span><span class="p">](</span><span class="dl">'</span><span class="s1">/api</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">url</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/json/</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>1.2 Boot and start the Express app in your before hook, and stop the app in
the after hook:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">LoopBack 3 style tests - Launch Express server</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">before</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExpressServer</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">boot</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">after</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// your tests here</span>
  <span class="nx">runTests</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>When launch the LoopBack 4 application</li>
</ol>

<ul>
  <li>
    <p>2.1 Update to use the LoopBack 4 server when doing requests:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// can use lb4's testlab's supertest as the dependency is already installed</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">supertest</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@loopback/testlab</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">assert</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">should</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">should</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">CoffeeShopApplication</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../../dist/application</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">jsonForLB4</span><span class="p">(</span><span class="nx">verb</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// use the lb4 app's rest server</span>
  <span class="k">return</span> <span class="nx">supertest</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">restServer</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
    <span class="p">[</span><span class="nx">verb</span><span class="p">](</span><span class="nx">url</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/json/</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>2.2 Boot and start the LoopBack 4 app in your before hook, and stop the app in
the after hook:</p>

    <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">LoopBack 3 style tests - launch LB4 app</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">before</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CoffeeShopApplication</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">boot</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">after</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// your tests here</span>
  <span class="nx">runTests</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>Example of this use can be seen in
<a href="https://github.com/strongloop/loopback-next/tree/master/examples/lb3-application/lb3app/test/acceptance.js"><code class="language-plaintext highlighter-rouge">test/acceptance.js</code></a>
which has the same tests as
<a href="https://github.com/strongloop/loopback-next/blob/spike/lb3test/examples/lb3-application/src/__tests__/acceptance/lb3app.acceptance.ts"><code class="language-plaintext highlighter-rouge">src/__tests__/acceptance/lb3app.acceptance.ts</code></a>,
but in LB3 style. And
<a href="https://github.com/strongloop/loopback-next/tree/master/examples/lb3-application/lb3app/test/authentication.js"><code class="language-plaintext highlighter-rouge">test/authentication.js</code></a></p>

<p>Now when you run <code class="language-plaintext highlighter-rouge">npm test</code> your LoopBack 3 tests should be run along with any
LoopBack 4 tests you have.</p>

<p>Optional: Another option is to migrate your tests to use LoopBack 4 style of
testing, similar to <code class="language-plaintext highlighter-rouge">src/__tests__/acceptance/lb3app.acceptance.ts</code>.
Documentation for LoopBack testing can be found in
https://loopback.io/doc/en/lb4/Testing-your-application.html.</p>

<h2 id="running-integration-tests">Running Integration Tests</h2>

<p>For the integration tests, LoopBack 3 models were bound to the LoopBack 4
application in order to allow JavaScript API to call application logic such as
<code class="language-plaintext highlighter-rouge">Model.create()</code>. This can be seen in
<a href="https://github.com/strongloop/loopback-next/blob/spike/lb3test/packages/booter-lb3app/src/lb3app.booter.ts#L76-L85"><code class="language-plaintext highlighter-rouge">packages/booter-lb3app/src/lb3app.booter.ts</code></a>.</p>

<p>In order to retrieve the model from the application’s context, <code class="language-plaintext highlighter-rouge">get()</code> can be
used as follows:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">LoopBack 3 style integration tests</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">app</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">CoffeeShop</span><span class="p">;</span>

  <span class="nx">before</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// If launch the LoopBack 4 application</span>
    <span class="c1">// app = new CoffeeShopApplication();</span>
    <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExpressServer</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">boot</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">before</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// follow the syntax: lb3-models.{ModelName}</span>
    <span class="c1">// If launch the LoopBack 4 application</span>
    <span class="c1">// CoffeeShop = await app.get('lb3-models.CoffeeShop');</span>
    <span class="nx">CoffeeShop</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">lbApp</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">lb3-models.CoffeeShop</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">after</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// your tests here</span>
  <span class="nx">runTests</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The syntax for LB3 model’s binding key is <code class="language-plaintext highlighter-rouge">lb3-models.{model name}</code>.</p>

<p>Additionally, LB3 datasources are also bound to the LB4 application’s context
and can be retrieved with a key in the syntax <code class="language-plaintext highlighter-rouge">lb3-datasources.{ds name}</code>.</p>

<p>Example integration tests can be found in
<a href="https://github.com/strongloop/loopback-next/tree/master/examples/lb3-application/lb3app/test/integration.js"><code class="language-plaintext highlighter-rouge">examples/lb3-application/lb3app/test/integration.js</code></a>.</p>

<p>Example authentication tests can be found in
<a href="https://github.com/strongloop/loopback-next/tree/master/examples/lb3-application/lb3app/test/authentication.js"><code class="language-plaintext highlighter-rouge">examples/lb3-application/lb3app/test/authentication.js</code></a>.</p>

<h2 id="need-help">Need help?</h2>

<p>Check out our
<a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw">Slack</a>
and ask for help with this tutorial.</p>

<h2 id="bugsfeedback">Bugs/Feedback</h2>

<p>Open an issue in <a href="https://github.com/strongloop/loopback-next">loopback-next</a>
and we’ll take a look.</p>

<h2 id="contributions">Contributions</h2>

<ul>
  <li><a href="https://github.com/strongloop/loopback-next/blob/master/docs/CONTRIBUTING.md">Guidelines</a></li>
  <li><a href="https://github.com/strongloop/loopback-next/issues/110">Join the team</a></li>
</ul>

<h2 id="tests">Tests</h2>

<p>Run <code class="language-plaintext highlighter-rouge">npm test</code> from the root folder.</p>

<h2 id="contributors">Contributors</h2>

<p>See
<a href="https://github.com/strongloop/loopback-next/graphs/contributors">all contributors</a>.</p>

<h2 id="license">License</h2>

<p>MIT</p>


    <div class="tags">
      
    </div>
</div>

<hr class="shaded"/>

<footer id="container">
            <div class="row">
                <div class="col-md-6 footer-left">
               &copy;2021 IBM / StrongLoop. All rights reserved. <br />
 Site last generated: Mar 22, 2021
              </div>
              <div class="col-md-6 footer-right">
                <p><img src="https://loopback.io/images/company_logo.png" alt="Company logo"/></p>
              </div>
            </div>
</footer>


        </div>
        <!-- /.row -->
</div>
<!-- /.container -->
    </div>
</body>

</html>
