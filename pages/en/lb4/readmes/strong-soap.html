<!DOCTYPE html>
<head>
    

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="keywords" content=" ">
  <title>strong-soap | LoopBack Documentation</title>
  <link rel="stylesheet" href="/css/syntax.css">

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/modern-business.css">
    <link rel="stylesheet" href="/css/lavish-bootstrap.css">
    <link rel="stylesheet" href="/css/customstyles.css">
    <link rel="stylesheet" href="/css/theme-v4.css">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150726441-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150726441-2');
</script>


    <!-- github star button -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>


    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
    <script src="/js/toc.js"></script>
    <script src="/js/customscripts.js"></script>

    <link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->


    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand no_icon" href="/doc/index.html">
              <img class="no_icon" style="width:147px;" src="/images/branding/logo/white/loopback.svg">&nbsp;<span class="projectTitle"></span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Docs<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://loopback.io/doc/en/lb4/apidocs.index.html" target="_blank">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="http://apidocs.loopback.io" target="_blank">LoopBack 3.x</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">View<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is / -->
                          
                            <li><a href="/">LoopBack Overview</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/lb4/ -->
                          
                            <li><a href="/doc/en/lb4/">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/lb3/ -->
                          
                            <li><a href="/doc/en/lb3/">LoopBack 3.x</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/lb2/ -->
                          
                            <li><a href="/doc/en/lb2/">LoopBack 2.x</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/community/ -->
                          
                            <li><a href="/doc/en/community/">Community projects</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/contrib/ -->
                          
                            <li><a href="/doc/en/contrib/">Contributing to LoopBack</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/en/sec/ -->
                          
                            <li><a href="/doc/en/sec/">Security advisories</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://github.com/strongloop/loopback.io" target="_blank">Docs Github Repo</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs-announcements" target="_blank">Announcements Mailing List</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs" target="_blank">Developer Forum</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw" target="_blank">LoopBack on Slack</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://stackoverflow.com/questions/tagged/strongloop+or+loopback4+or+loopbackjs" target="_blank">LoopBack on Stack Overflow</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is  -->
                          
                            <li><a href="https://strongloop.com/strongblog/tag_LoopBack.html" target="_blank">StrongLoop Blog - LoopBack</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Translations<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/es/lb2/ -->
                          
                            <li><a href="/doc/es/lb2/">Español (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/es/lb4/ -->
                          
                            <li><a href="/doc/es/lb4/">Español (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/fr/lb2/ -->
                          
                            <li><a href="/doc/fr/lb2/">Français (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/fr/lb4/ -->
                          
                            <li><a href="/doc/fr/lb4/">Français (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ko/lb2/ -->
                          
                            <li><a href="/doc/ko/lb2/">한국어 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ko/lb3/ -->
                          
                            <li><a href="/doc/ko/lb3/">한국어 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/pt-br/lb2/ -->
                          
                            <li><a href="/doc/pt-br/lb2/">Português (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/pt-br/lb4/ -->
                          
                            <li><a href="/doc/pt-br/lb4/">Português (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ja/lb2/ -->
                          
                            <li><a href="/doc/ja/lb2/">日本語 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ja/lb3/ -->
                          
                            <li><a href="/doc/ja/lb3/">日本語 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ja/lb4/ -->
                          
                            <li><a href="/doc/ja/lb4/">日本語 (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/ru/lb2/ -->
                          
                            <li><a href="/doc/ru/lb2/">Pусский (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/zh/lb2/ -->
                          
                            <li><a href="/doc/zh/lb2/">中文 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/en/lb4/readmes/strong-soap.html .... folderitem.url is /doc/zh/lb4/ -->
                          
                            <li><a href="/doc/zh/lb4/">中文 (v4)</a></li>
                          
                        
                    </ul>
                </li>
                
                
                
                <li>
                    <form id="search" name="search" class="input-group lb-search" action="/search" method="GET">
                        <input type="text" class="form-control search-bar" placeholder="Search (powered by Watson)" name="q">
                        
                          <input type="hidden" name="sidebar" value="lb3_sidebar">
                        
                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-default" aria-label="search">
                              <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                            </button>
                        </div>
                      </form>
                </li>
            </ul>
        </div>
      </div>
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <nav class="col-md-3 sidebar-col">
          











<!-- NOTE: sidebar = site.data.sidebars.mydoc_sidebar.entries -->
<div class="sidebarTitle"><a href="index.html">LoopBack 3.x</a></div>
<ul id="mysidebar" class="nav-list">
  

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Installation.html">Installation</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installation-troubleshooting.html">Installation troubleshooting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="3.0-Release-Notes.html">3.0 Release Notes</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Migrating-to-3.0.html">Migrating apps to v3</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-core-concepts.html">LoopBack core concepts</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Routing.html">Routing</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-FAQ.html">LoopBack FAQ</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Glossary.html">Glossary</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="StrongLoop-Labs.html">StrongLoop Labs</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-with-LoopBack.html">Getting started with LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-a-simple-API.html">Create a simple API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Use-API-Explorer.html">Use API Explorer</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connect-your-API-to-a-data-source.html">Connect your API to a data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extend-your-API.html">Extend your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-static-web-page.html">Add a static web page</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-custom-Express-route.html">Add a custom Express route</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Next-steps.html">Next steps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Deploy-for-GDPR-readiness.html">Considerations for GDPR readiness</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-part-II.html">Getting started part II</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introducing-the-Coffee-Shop-Reviews-app.html">Introducing the Coffee Shop Reviews app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-data-source.html">Create new data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-models.html">Create new models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-model-relations.html">Define model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-access-controls.html">Define access controls</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-a-remote-hook.html">Define a remote hook</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-AngularJS-client.html">Create AngularJS client</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Learn-more.html">Learn more</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorials-and-examples.html">Tutorials and examples</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-an-application.html">Creating an application</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Environment-specific-configuration.html">Environment-specific configuration</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Versioning-your-API.html">Versioning your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Standard-project-structure.html">Standard project structure</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-data-sources.html">Defining data sources</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-database-schema-from-models.html">Creating a database schema from models</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data-sources.html">Data sources: advanced topics</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-database-transactions.html">Using database transactions</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Executing-native-SQL.html">Executing native SQL</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Building-a-connector.html">Building a connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-create-retrieve-update-and-delete-methods.html">Implementing CRUD methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-model-discovery.html">Implementing model discovery</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-auto-migration.html">Implementing auto-migration</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-models.html">Defining models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-the-model-generator.html">Using the model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Discovering-models-from-relational-databases.html">Discovering models from relational databases</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-models-from-unstructured-data.html">Creating models from unstructured data</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Customizing-models.html">Customizing models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Exposing-models-over-REST.html">Exposing models over REST</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Validating-model-data.html">Validating model data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-model-relations.html">Creating model relations</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-model-relations.html">Tutorial: model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="BelongsTo-relations.html">BelongsTo relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasOne-relations.html">HasOne relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasMany-relations.html">HasMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasManyThrough-relations.html">HasManyThrough relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasAndBelongsToMany-relations.html">HasAndBelongsToMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Polymorphic-relations.html">Polymorphic relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Querying-related-models.html">Querying related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Embedded-models-and-relations.html">Embedded models and relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Nested-queries.html">Nested queries</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Using-built-in-models.html">Using built-in models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extending-built-in-models.html">Extending built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Adding-remote-methods-to-built-in-models.html">Adding remote methods to built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-property-reference.html">Model property reference</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Built-in-models-REST-API.html">Built-in models REST API</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="PersistedModel-REST-API.html">PersistedModel REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Access-token-REST-API.html">Access token REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-REST-API.html">ACL REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-REST-API.html">Application REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-REST-API.html">Relation REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Role-REST-API.html">Role REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-REST-API.html">User REST API</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Attaching-models-to-data-sources.html">Attaching models to data sources</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Managing-users.html">Managing users</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Registering-users.html">Registering users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Logging-in-users.html">Logging in users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Partitioning-users-with-realms.html">Partitioning users with realms</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-management-example.html">User management example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Authentication-authorization-and-permissions.html">Authentication, authorization, and permissions</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introduction-to-User-model-authentication.html">Introduction to User model authentication</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Controlling-data-access.html">Controlling data access</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Making-authenticated-requests.html">Making authenticated requests</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-and-using-roles.html">Defining and using roles</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Accessing-related-models.html">Accessing related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-default-admin-user.html">Creating a default admin user</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Security-considerations.html">Security considerations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-access-control.html">Tutorial: access control</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Working-with-data.html">Working with data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-updating-and-deleting-data.html">Creating, updating, and deleting data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Querying-data.html">Querying data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Fields-filter.html">Fields filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Include-filter.html">Include filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Limit-filter.html">Limit filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Order-filter.html">Order filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Skip-filter.html">Skip filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Where-filter.html">Where filter</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data.html">Advanced topics: data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-server-sent-events.html">Realtime server-sent events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet.html">AngularJS Live Set</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet-Example.html">AngularJS Live Set example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-socket-io.html">Real-time apps AngularJS using socket.io</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-application-logic.html">Adding application logic</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-LoopBack-objects.html">Working with LoopBack objects</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-logic-to-models.html">Adding logic to models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-methods.html">Remote methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-hooks.html">Remote hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Operation-hooks.html">Operation hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connector-hooks.html">Connector hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Adding-application-logic.html">Tutorial: Application logic</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-boot-scripts.html">Defining boot scripts</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-mixins.html">Defining mixins</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-middleware.html">Defining middleware</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-example.html">Middleware example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-current-context.html">Using current context</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Events.html">Events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-promises.html">Using promises</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Running-and-debugging-apps.html">Running and debugging apps</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Setting-debug-strings.html">Setting debug strings</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-strong-error-handler.html">Using strong-error-handler</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Preparing-for-deployment.html">Preparing for deployment</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-on-Bluemix.html">Running LoopBack apps on Bluemix</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-components.html">LoopBack components</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OAuth-2.0.html">OAuth 2.0 component</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Push-notifications.html">Push notification component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-iOS-apps.html">Push notifications for iOS apps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-Android-apps.html">Push notifications for Android apps</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Storage-component.html">Storage component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-component-REST-API.html">Storage component REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-example.html">Storage component example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Third-party-login-using-Passport.html">Passport login component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Configuring-providers.json.html">Configuring providers.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-third-party-login.html">Tutorial: third-party login</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Synchronization.html">Synchronization component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Offline-Synchronization.html">Tutorial: Offline Synchronization</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Advanced-topics-sync.html">Advanced topics - sync</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-components.html">Creating components</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Command-line-tools.html">Command-line tools</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-generator.html">ACL generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="API-definition-generator.html">API definition generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-generator.html">Application generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Bluemix-config-generator.html">Bluemix configuration generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Boot-script-generator.html">Boot script generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Data-source-generator.html">Data source generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-generator.html">Middleware generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-generator.html">Model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Oracle-installer-command.html">Oracle installer command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Property-generator.html">Property generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Refresh-definitions-command.html">Refresh definitions command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-generator.html">Relation generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-method-generator.html">Remote method generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-generator.html">SOAP generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-generator.html">Swagger generator</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Client-SDKs.html">Client SDKs</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="iOS-SDK.html">iOS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="IOS-getting-started.html">Getting started with the iOS SDK</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Android-SDK.html">Android SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-android-getting-started.html">Getting started with the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-files-using-the-Android-SDK.html">Working with files using the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-using-Android-SDK.html">Push notifications using Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-the-LocalInstallation-class.html">Working with the LocalInstallation class</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="AngularJS-JavaScript-SDK.html">AngularJS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Angular-example-app.html">Angular example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-Grunt-plugin.html">AngularJS Grunt plugin</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Xamarin-SDK.html">Xamarin SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-client-API.html">Xamarin client API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-example-app.html">Xamarin example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-in-the-client.html">Isomorphic LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Running-LoopBack-in-the-browser.html">Running LoopBack in the browser</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-Browserify.html">Using Browserify</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Isomorphic-LoopBack-example.html">Isomorphic example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Connectors-reference.html">Connectors reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Memory-connector.html">Memory connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Database-connectors.html">Database connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cassandra-connector.html">Cassandra connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cloudant-connector.html">Cloudant connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Couchdb2-connector.html">CouchDB 2.x connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DashDB.html">DashDB</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-connector.html">DB2 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-iSeries-connector.html">DB2 for iSeries connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-for-z-OS.html">DB2 for z/OS</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="gRPC-connector.html">gRPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Informix.html">Informix connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MongoDB-connector.html">MongoDB connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MongoDB.html">MongoDB Connector Tutorial</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-MongoLab.html">Using MongoLab</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MySQL-connector.html">MySQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MySQL.html">MySQL Connector Tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OpenAPI-connector.html">OpenAPI connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Oracle-connector.html">Oracle connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installing-the-Oracle-connector.html">Installing the Oracle connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Oracle.html">Oracle connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="PostgreSQL-connector.html">PostgreSQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-PostgreSQL.html">PostgreSQL connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-connector.html">Redis connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="kv-redis-connector.html">Redis key-value connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Example-kv-connector.html">KV connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SQL-Server-connector.html">SQL Server connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Microsoft-SQL-Server.html">SQL Server connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SQLite3.html">SQLite3 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="zOSconnectEE.html">z/OS Connect Enterprise Edition connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Other-connectors.html">Other connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Email-connector.html">Email connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="JSON-RPC-connector.html">JSON RPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQLight-connector.html">MQ Light connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-connector.html">Push connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Remote-connector.html">Remote connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-connector-example.html">Remote connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-Remoting.html">Strong Remoting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="REST-connector.html">REST connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="REST-connector-example.html">REST connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SOAP-connector.html">SOAP connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-soap.html">Strong-soap</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-Connector-example.html">SOAP connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-SOAP.html">Connecting to SOAP web services</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-connector.html">Storage connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-connector.html">Swagger connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Community-connectors.html">Community connectors</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Project-layout-reference.html">Project layout reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="client-directory.html">client directory</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="common-directory.html">common directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-definition-JSON-file.html">Model definition JSON file</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-extension-file.html">Model extension file</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="package.json.html">package.json</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="server-directory.html">server directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="component-config.json.html">component-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="config.json.html">config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="datasources.json.html">datasources.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.json.html">middleware.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.development.json.html">middleware.development.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="model-config.json.html">model-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="server.js.html">server.js</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Node-reference.html">Node reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-types.html">LoopBack types</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Geotype.html">Geopoint type</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Valid-names-in-LoopBack.html">Valid names in LoopBack</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Basic-model-object.html">Basic model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connected-model-object.html">Connected model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Error-object.html">Error object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-middleware.html">LoopBack middleware</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Publish-subscribe-messaging.html">Publish-subscribe messaging</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-pub-sub.html">Strong Pub-sub</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-bridge.html">Pub-sub bridge</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQTT-adapter.html">MQTT adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-pub-sub-adapter.html">Redis pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Primus-pub-sub-adapter.html">Primus pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-example.html">Node pub-sub example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-Loopback-example.html">LoopBack pub-sub example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="All-tags.html">All tags</a>
    
      
  </li>
  



</ul>

        </nav>
        <!-- Content Column -->
        <div class="col-md-9">
            
  <div class="v3notice">
LoopBack 3 has reached end of life. We are no longer accepting pull requests or providing 
support for community users. The only exception is fixes for critical bugs and security 
vulnerabilities provided as part of support for IBM API Connect customers.
We urge all LoopBack 3 users to migrate their applications to LoopBack 4 as soon as possible. 
Learn more about
<a href="https://loopback.io/doc/en/contrib/Long-term-support.html">LoopBack's long term support policy.</a>
</div>


<div class="post-header">
   <h1 class="post-title-main">strong-soap</h1>
   
     
       <a target="_blank" href="https://github.com/strongloop/loopback.io/blob/gh-pages/pages/pages/en/lb4/readmes/strong-soap.md" class="githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit this page</a>
   
</div>

<div class="post-content">


  




 
   
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
;$(function() {
  var level = parseInt(3, 10);
  if (level === 1) {level = 'h2'}
  if (level === 2) {level = 'h2,h3'}
  if (level === 3) {level = 'h2,h3,h4'}
  if (level === 4) {level = 'h2,h3,h4,h5'}

  // Add a new level for changelog files which use h1,h2,h3
  if (level === 0) {level = 'h1,h2,h3,h4,h5'}

  var toc = $('#toc')

  toc.toc({minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: level})

  /* this offset helps with the space taken up by the floating toolbar */
  toc.on('click', 'a', function() {
    var target = $(this.getAttribute('href')),
      scroll_target = target.offset().top

    $(window).scrollTop(scroll_target - 10)
    return false
  })
  .on('click', '.toc-expand-button', function() {
    toc.find('> ul').slideToggle('fast');
  })
})
</script>

<div id="toc">
  <span class="toc-title">Page Contents</span>
  <button type="button" class="btn btn-link toc-expand-button">
    <i class="fa fa-bars"></i>
  </button>
</div>

 

    <h1 id="strong-soap">strong-soap</h1>

<p>This module provides a Node.js SOAP client for invoking web services and a mock-up SOAP server capability to create and test your web service. This module is based on <code class="language-plaintext highlighter-rouge">node-soap</code> module.</p>

<!-- Run `npm run toc` to update below section -->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#install">Install</a></li>
  <li><a href="#client">Client</a>
    <ul>
      <li><a href="#extra-headers-optional">Extra headers (optional)</a></li>
      <li><a href="#clientdescribe">Client.describe()</a></li>
      <li><a href="#clientsetsecuritysecurity">Client.setSecurity(security)</a></li>
      <li><a href="#clientmethodargs-callback">Client.<em>method</em>(args, callback)</a></li>
      <li><a href="#clientserviceportmethodargs-callback-options-extraheaders">Client.<em>service</em>.<em>port</em>.<em>method</em>(args, callback[, options[, extraHeaders]])</a></li>
      <li><a href="#clientlastrequest">Client.<em>lastRequest</em></a></li>
      <li><a href="#clientsetendpointurl">Client.setEndpoint(url)</a></li>
      <li><a href="#client-events">Client Events</a></li>
      <li><a href="#security">Security</a></li>
      <li><a href="#basicauthsecurity">BasicAuthSecurity</a></li>
      <li><a href="#bearersecurity">BearerSecurity</a></li>
      <li><a href="#clientsslsecurity">ClientSSLSecurity</a></li>
      <li><a href="#wssecurity">WSSecurity</a></li>
      <li><a href="#wssecuritycert">WSSecurityCert</a></li>
    </ul>
  </li>
  <li><a href="#xml-attributes">XML Attributes</a>
    <ul>
      <li><a href="#handling-xml-attributes-value-and-xml-wsdloptions">Handling XML Attributes, Value and XML (wsdlOptions)</a></li>
      <li><a href="#overriding-the-value-key">Overriding the value key</a></li>
      <li><a href="#overriding-the-xml-key">Overriding the xml key</a></li>
      <li><a href="#overriding-the-attributes-key">Overriding the <code class="language-plaintext highlighter-rouge">attributes</code> key</a></li>
    </ul>
  </li>
  <li><a href="#xmlhandler">XMLHandler</a></li>
  <li><a href="#wsdl">WSDL</a>
    <ul>
      <li><a href="#wsdlopenwsdlurl-options-callbackerr-wsdl">wsdl.open(wsdlURL, options, callback(err, wsdl))</a></li>
    </ul>
  </li>
  <li><a href="#server">Server</a>
    <ul>
      <li><a href="#soaplistenserver-path-services-wsdl">soap.listen(<em>server</em>, <em>path</em>, <em>services</em>, <em>wsdl</em>)</a></li>
      <li><a href="#options">Options</a></li>
      <li><a href="#server-logging">Server logging</a></li>
      <li><a href="#server-events">Server events</a></li>
      <li><a href="#soap-fault">SOAP Fault</a></li>
      <li><a href="#server-security-example-using-passworddigest">Server security example using PasswordDigest</a></li>
      <li><a href="#server-connection-authorization">Server connection authorization</a></li>
    </ul>
  </li>
  <li><a href="#soap-headers">SOAP headers</a>
    <ul>
      <li><a href="#received-soap-headers">Received SOAP headers</a></li>
      <li><a href="#outgoing-soap-headers">Outgoing SOAP headers</a></li>
    </ul>
  </li>
  <li><a href="#soap-stub">soap-stub</a>
    <ul>
      <li><a href="#example">Example</a></li>
    </ul>
  </li>
  <li><a href="#contributors">Contributors</a></li>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="overview">Overview</h2>

<p>Features:</p>

<ul>
  <li>Full SOAP Client capability and mock-up SOAP server capability</li>
  <li>Handles both RPC and Document styles</li>
  <li>Handles both SOAP 1.1 and SOAP 1.2 Fault</li>
  <li>APIs to parse XML into JSON and JSON into XML</li>
  <li>API to describe WSDL document</li>
  <li>Support for both synchronous and asynchronous method handlers</li>
  <li>WS-Security (currently only UsernameToken and PasswordText encoding is supported)</li>
</ul>

<h2 id="install">Install</h2>

<p>Node.js version 10, 12, and 14 are officially supported. We dropped version 8
support in 3.0.0.</p>

<p>Install with <a href="http://github.com/isaacs/npm">npm</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>strong-soap
</code></pre></div></div>

<h2 id="client">Client</h2>

<p>Start with the WSDL for the web service you want to invoke. For example, the stock quote service http://www.webservicex.net/stockquote.asmx and the WSDL is http://www.webservicex.net/stockquote.asmx?WSDL</p>

<p>Create a new SOAP client from WSDL URL using <code class="language-plaintext highlighter-rouge">soap.createClient(url[, options], callback)</code>. Also supports a local file system path. An instance of <code class="language-plaintext highlighter-rouge">Client</code> is passed to the <code class="language-plaintext highlighter-rouge">soap.createClient</code> callback.  It is used to execute methods on the soap service.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">soap</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">strong-soap</span><span class="dl">'</span><span class="p">).</span><span class="nx">soap</span><span class="p">;</span>
<span class="c1">// wsdl of the web service this client is going to invoke. For local wsdl you can use, url = './wsdls/stockquote.wsdl'</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://www.webservicex.net/stockquote.asmx?WSDL</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">requestArgs</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">IBM</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">client</span><span class="p">[</span><span class="dl">'</span><span class="s1">StockQuote</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">StockQuoteSoap</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">GetQuote</span><span class="dl">'</span><span class="p">];</span>
  <span class="nx">method</span><span class="p">(</span><span class="nx">requestArgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//response envelope</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Response Envelope: </span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">envelope</span><span class="p">);</span>
    <span class="c1">//'result' is the response body</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Result: </span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>

</code></pre></div></div>

<p>As well as creating a client via a <code class="language-plaintext highlighter-rouge">url</code>, an existing <a href="#wsdl">WSDL</a> object can be passed in via <code class="language-plaintext highlighter-rouge">options.WSDL_CACHE</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">soap</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">strong-soap</span><span class="dl">'</span><span class="p">).</span><span class="nx">soap</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">WSDL</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">WSDL</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://www.webservicex.net/stockquote.asmx?WSDL</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Pass in WSDL options if any</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">WSDL</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="nx">options</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wsdl</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// You should be able to get to any information of this WSDL from this object. Traverse</span>
    <span class="c1">// the WSDL tree to get  bindings, operations, services, portTypes, messages,</span>
    <span class="c1">// parts, and XSD elements/Attributes.</span>

    <span class="c1">// Set the wsdl object in the cache. The key (e.g. 'stockquotewsdl')</span>
    <span class="c1">// can be anything, but needs to match the parameter passed into soap.createClient()</span>
    <span class="kd">var</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">WSDL_CACHE</span> <span class="p">:</span> <span class="p">{</span>
        <span class="na">stockquotewsdl</span><span class="p">:</span> <span class="nx">wsdl</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="dl">'</span><span class="s1">stockquotewsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">clientOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">client</span><span class="p">[</span><span class="dl">'</span><span class="s1">StockQuote</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">StockQuoteSoap</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">GetQuote</span><span class="dl">'</span><span class="p">];</span>
      <span class="nx">method</span><span class="p">(</span><span class="nx">requestArgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">//response envelope</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Response Envelope: </span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">envelope</span><span class="p">);</span>
      <span class="c1">//'result' is the response body</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Result: </span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The Request envelope created by above service invocation:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;soap:Envelope</span> <span class="na">xmlns:soap=</span><span class="s">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;soap:Header/&gt;</span>
  <span class="nt">&lt;soap:Body&gt;</span>
    <span class="nt">&lt;ns1:GetQuote</span> <span class="na">xmlns:ns1=</span><span class="s">"http://www.webserviceX.NET/"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ns1:symbol&gt;</span>IBM<span class="nt">&lt;/ns1:symbol&gt;</span>
    <span class="nt">&lt;/ns1:GetQuote&gt;</span>
  <span class="nt">&lt;/soap:Body&gt;</span>
<span class="nt">&lt;/soap:Envelope&gt;</span>
</code></pre></div></div>

<p>This WSDL operation is defined as document/literal-wrapped style. Hence the request in soap &lt;Body&gt; is wrapped in operation name. Refer to test cases <a href="https://github.com/strongloop/strong-soap/blob/master/test/server-client-document-test.js">server-client-document-test</a> and  <a href="https://github.com/strongloop/strong-soap/blob/master/test/server-client-rpc-test.js">server-client-rpc-test</a> to understand document and rpc styles and their
Request, Response and Fault samples.</p>

<p>The <code class="language-plaintext highlighter-rouge">options</code> argument allows you to customize the client with the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">endpoint</code>: to override the SOAP service’s host specified in the <code class="language-plaintext highlighter-rouge">.wsdl</code> file.</li>
  <li><code class="language-plaintext highlighter-rouge">request</code>: to override the <a href="https://github.com/request/request">request</a> module.</li>
  <li><code class="language-plaintext highlighter-rouge">httpClient</code>: to provide your own http client that implements <code class="language-plaintext highlighter-rouge">request(rurl, data, callback, exheaders, exoptions)</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">envelopeKey</code>: to set specific key instead of &lt;pre&gt;«b&gt;soap&lt;/b&gt;:Body&gt;&lt;/<b>soap</b>:Body&gt;&lt;/pre&gt;</li>
  <li><code class="language-plaintext highlighter-rouge">wsdl_options</code>: custom options for the request module on WSDL requests.</li>
  <li><code class="language-plaintext highlighter-rouge">wsdl_headers</code>: custom HTTP headers to be sent on WSDL requests.</li>
</ul>

<p>Note: for versions of node &gt;0.10.X, you may need to specify <code class="language-plaintext highlighter-rouge">{connection: 'keep-alive'}</code> in SOAP headers to avoid truncation of longer chunked responses.</p>

<h3 id="extra-headers-optional">Extra headers (optional)</h3>

<p>User can define extra HTTP headers to be sent on the request.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">clientOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">customRequestHeader</span> <span class="o">=</span> <span class="p">{</span><span class="na">customheader1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">test1</span><span class="dl">'</span><span class="p">};</span>
  <span class="c1">// Custom request header</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">GetQuote</span><span class="p">(</span><span class="nx">requestArgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Result in SOAP envelope body which is the wrapper element.</span>
    <span class="c1">// In this case, result object corresponds to GetCityForecastByZIPResponse.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">customRequestHeader</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="clientdescribe">Client.describe()</h3>

<p>Describes services, ports and methods as a JavaScript object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Describes the entire WSDL in a JSON tree object form.</span>
<span class="kd">var</span> <span class="nx">description</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">describe</span><span class="p">();</span>
<span class="c1">// Inspect GetQuote operation. You can inspect Service: {Port: {operation: {</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">description</span><span class="p">.</span><span class="nx">StockQuote</span><span class="p">.</span><span class="nx">StockQuoteSoap</span><span class="p">.</span><span class="nx">GetQuote</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="clientsetsecuritysecurity">Client.setSecurity(security)</h3>

<p>Use the specified security protocol.</p>

<p>Refer to test case <a href="https://github.com/strongloop/strong-soap/blob/master/test/ssl-test.js">ssl-test</a> for an example of using this API.</p>

<h3 id="clientmethodargs-callback">Client.<em>method</em>(args, callback)</h3>

<p>Call <em>method</em> on the SOAP service.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Result is a javascript object</span>
      <span class="c1">// Envelope is the response envelope from the Web Service</span>
      <span class="c1">// soapHeader is the response soap header as a JavaScript object</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>A <em>method</em> can also be called as a promise.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">({</span><span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">}){</span>
    <span class="c1">// ...</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="c1">// in async/await flavor</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
</code></pre></div></div>

<h3 id="clientserviceportmethodargs-callback-options-extraheaders">Client.<em>service</em>.<em>port</em>.<em>method</em>(args, callback[, options[, extraHeaders]])</h3>

<p>Call a <em>method</em> using a specific <em>service</em> and <em>port</em>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">MyService</span><span class="p">.</span><span class="nx">MyPort</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Result is a JavaScript object</span>
  <span class="p">})</span>
</code></pre></div></div>

<h4 id="options-optional">Options (optional)</h4>

<p>Accepts any option that the request module accepts, see <a href="https://github.com/request/request">request</a> module.</p>

<p>For example, you could set a timeout of 5 seconds on the request like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">MyService</span><span class="p">.</span><span class="nx">MyPort</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// result is a javascript object</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">timeout</span><span class="p">:</span> <span class="mi">5000</span><span class="p">})</span>
</code></pre></div></div>

<p>You can measure the elapsed time on the request by passing the time option:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">MyService</span><span class="p">.</span><span class="nx">MyPort</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// client.lastElapsedTime - the elapsed time of the last request in milliseconds</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">time</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span>
</code></pre></div></div>

<h4 id="alternative-method-call-using-callback-last-pattern">Alternative method call using callback-last pattern</h4>

<p>To align method call signature with Node’s standard callback-last pattern and eventually allow promisification of method calls, the following method signatures are also supported:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">MyService</span><span class="p">.</span><span class="nx">MyPort</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// result is a javascript object</span>
<span class="p">})</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">MyService</span><span class="p">.</span><span class="nx">MyPort</span><span class="p">.</span><span class="nx">MyFunction</span><span class="p">({</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">},</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">extraHeaders</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// result is a javascript object</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="clientlastrequest">Client.<em>lastRequest</em></h3>

<p>The property that contains last full soap request for client logging.</p>

<h3 id="clientsetendpointurl">Client.setEndpoint(url)</h3>

<p>Overwrites the SOAP service endpoint address.</p>

<h3 id="client-events">Client events</h3>
<p>Client instances emit the following events:</p>

<ul>
  <li>request - Emitted before a request is sent. The event handler receives the
entire Soap request (Envelope) including headers.</li>
  <li>message - Emitted before a request is sent. The event handler receives the
Soap body contents. Useful if you don’t want to log /store Soap headers.</li>
  <li>soapError - Emitted when an erroneous response is received.
Useful if you want to globally log errors.</li>
  <li>response - Emitted after a response is received. The event handler receives
the SOAP response body as well as the entire <code class="language-plaintext highlighter-rouge">IncomingMessage</code> response object.
This is emitted for all responses (both success and errors).</li>
</ul>

<p>For an example of using this API, see  <a href="https://github.com/strongloop/strong-soap/blob/master/test/client-test.js">ssl-test</a>.</p>

<p>Here is an example of ‘soapError’ event</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/wsdl/default_namespace.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">didEmitEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">soapError</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">didEmitEvent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">root</span><span class="p">.</span><span class="nx">Envelope</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Fault</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">MyOperation</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="nx">didEmitEvent</span><span class="p">);</span>
    <span class="nx">done</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">},</span> <span class="nx">baseUrl</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="security">Security</h3>

<p><code class="language-plaintext highlighter-rouge">strong-soap</code> has several default security protocols.  You can easily add your own
as well.  The interface is quite simple. Each protocol defines two methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">addOptions</code> - Method that accepts an options arg that is eventually passed directly to <code class="language-plaintext highlighter-rouge">request</code></li>
  <li><code class="language-plaintext highlighter-rouge">toXML</code> - Method that returns a string of XML.</li>
</ul>

<h3 id="basicauthsecurity">BasicAuthSecurity</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">setSecurity</span><span class="p">(</span><span class="k">new</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">BasicAuthSecurity</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="bearersecurity">BearerSecurity</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">setSecurity</span><span class="p">(</span><span class="k">new</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">BearerSecurity</span><span class="p">(</span><span class="dl">'</span><span class="s1">token</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="clientsslsecurity">ClientSSLSecurity</h3>

<p><em>Note</em>: If you run into issues using this protocol, consider passing these options
as default request options to the constructor:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">rejectUnauthorized: false</code></li>
  <li><code class="language-plaintext highlighter-rouge">strictSSL: false</code></li>
  <li><code class="language-plaintext highlighter-rouge">secureOptions: constants.SSL_OP_NO_TLSv1_2</code> (this is likely needed for node &gt;= 10.0)</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">client</span><span class="p">.</span><span class="nx">setSecurity</span><span class="p">(</span><span class="k">new</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">ClientSSLSecurity</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">/path/to/key</span><span class="dl">'</span>
    <span class="p">,</span> <span class="dl">'</span><span class="s1">/path/to/cert</span><span class="dl">'</span>
    <span class="p">,</span> <span class="p">{</span><span class="cm">/*default request options*/</span><span class="p">}</span>
  <span class="p">));</span>
</code></pre></div></div>

<h3 id="wssecurity">WSSecurity</h3>

<p><code class="language-plaintext highlighter-rouge">WSSecurity</code> implements WS-Security. UsernameToken and PasswordText/PasswordDigest is supported.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="nx">wsSecurity</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WSSecurity</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="c1">//the 'options' object is optional and contains properties:</span>
    <span class="c1">//passwordType: 'PasswordDigest' or 'PasswordText' default is PasswordText</span>
    <span class="c1">//hasTimeStamp: true or false, default is true</span>
    <span class="c1">//hasTokenCreated: true or false, default is true</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">setSecurity</span><span class="p">(</span><span class="nx">wsSecurity</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="wssecuritycert">WSSecurityCert</h3>

<p>WS-Security X509 Certificate support.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">privateKeyPath</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">publicKey</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">publicKeyPath</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span> <span class="c1">// optional password</span>
  <span class="kd">var</span> <span class="nx">wsSecurity</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">WSSecurityCert</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">publicKey</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">setSecurity</span><span class="p">(</span><span class="nx">wsSecurity</span><span class="p">);</span>
</code></pre></div></div>

<p><em>Note</em>: Optional dependency ‘ursa’ is required to be installed successfully when WSSecurityCert is used.</p>

<h2 id="xml-attributes">XML attributes</h2>

<h3 id="handling-xml-attributes-value-and-xml-wsdloptions">Handling XML attributes, value, and XML (wsdlOptions)</h3>

<p>To override the default behavior of <code class="language-plaintext highlighter-rouge">strong-soap</code>, use the <code class="language-plaintext highlighter-rouge">wsdlOptions</code> object, passed in the
<code class="language-plaintext highlighter-rouge">createClient()</code> method.  The <code class="language-plaintext highlighter-rouge">wsdlOptions</code> has the following properties:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">wsdlOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">attributesKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theAttrs</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">valueKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theVal</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">xmlKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theXml</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If you call <code class="language-plaintext highlighter-rouge">createClient()</code> with no options (or an empty Object <code class="language-plaintext highlighter-rouge">{}</code>),  <code class="language-plaintext highlighter-rouge">strong-soap</code> defaults
to the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">attributesKey</code> : <code class="language-plaintext highlighter-rouge">'$attributes'</code></li>
  <li><code class="language-plaintext highlighter-rouge">valueKey</code> : <code class="language-plaintext highlighter-rouge">'$value'</code></li>
  <li><code class="language-plaintext highlighter-rouge">xmlKey</code> : <code class="language-plaintext highlighter-rouge">'$xml'</code></li>
</ul>

<h3 id="overriding-the-value-key">Overriding the value key</h3>

<p>By default, <code class="language-plaintext highlighter-rouge">strong-soap</code> uses <code class="language-plaintext highlighter-rouge">$value</code> as key for any parsed XML value which may interfere with your other code as it
could be some reserved word, or the <code class="language-plaintext highlighter-rouge">$</code> in general cannot be used for a key to start with.</p>

<p>You can define your own <code class="language-plaintext highlighter-rouge">valueKey</code> by passing it in the <code class="language-plaintext highlighter-rouge">wsdl_options</code> to the createClient call like so:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">wsdlOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">valueKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theVal</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/wsdl/default_namespace.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wsdlOptions</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// your code</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="overriding-the-xml-key">Overriding the xml key</h3>
<p>As <code class="language-plaintext highlighter-rouge">valueKey</code>, <code class="language-plaintext highlighter-rouge">strong-soap</code> uses <code class="language-plaintext highlighter-rouge">$xml</code> as key. The xml key is used to pass XML Object without adding namespace or parsing the string.</p>

<p>Example :</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dom</span> <span class="o">=</span> <span class="p">{</span>
     <span class="na">$xml</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;parentnode type="type"&gt;&lt;childnode&gt;&lt;/childnode&gt;&lt;/parentnode&gt;</span><span class="dl">'</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;tns:dom&gt;</span>
    <span class="nt">&lt;parentnode</span> <span class="na">type=</span><span class="s">"type"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;childnode&gt;&lt;/childnode&gt;</span>
    <span class="nt">&lt;/parentnode&gt;</span>
<span class="nt">&lt;/tns:dom&gt;</span>
</code></pre></div></div>

<p>You can define your own <code class="language-plaintext highlighter-rouge">xmlKey</code> by passing it in the <code class="language-plaintext highlighter-rouge">wsdl_options</code> to the createClient call like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">wsdlOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">xmlKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theXml</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/wsdl/default_namespace.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wsdlOptions</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// your code</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="overriding-the-attributes-key">Overriding the attributes key</h3>

<p>You can achieve attributes like:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;parentnode&gt;</span>
  <span class="nt">&lt;childnode</span> <span class="na">name=</span><span class="s">"childsname"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/childnode&gt;</span>
<span class="nt">&lt;/parentnode&gt;</span>
</code></pre></div></div>
<p>By attaching an attributes object to a node.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">parentnode</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">childnode</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">$attributes</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">childsname</span><span class="dl">'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>
<p>However, “attributes” may be a reserved key for some systems that actually want a node:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;attributes&gt;</span>
<span class="nt">&lt;/attributes&gt;</span>
</code></pre></div></div>

<p>In this case you can configure the attributes key in the <code class="language-plaintext highlighter-rouge">wsdlOptions</code> like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">wsdlOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">attributesKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$attributes</span><span class="dl">'</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Adding xsiType</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/wsdl/default_namespace.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wsdlOptions</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">client</span><span class="p">.</span><span class="o">*</span><span class="nx">method</span><span class="o">*</span><span class="p">({</span>
    <span class="na">parentnode</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">childnode</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">$attributes</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">$xsiType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{xmlnsTy}Ty</span><span class="dl">"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Removing the xsiType. The resulting Request shouldn’t have the attribute xsiType</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/wsdl/default_namespace.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">wsdlOptions</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">client</span><span class="p">.</span><span class="o">*</span><span class="nx">method</span><span class="o">*</span><span class="p">({</span>
    <span class="na">parentnode</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">childnode</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">$attributes</span><span class="p">:</span> <span class="p">{</span>

        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>To see it in practice, consider the sample in: <a href="https://github.com/strongloop/strong-soap/tree/master/test/request-response-samples/addPets__force_namespaces">test/request-response-samples/addPets__force_namespaces</a></p>

<h2 id="xmlhandler">XMLHandler</h2>

<p>XMLHandler enables you to to convert a JSON object to XML and XML to a JSON object.  It can also parse an XML string or stream into the XMLBuilder tree.</p>

<p>API to convert JSON object to XML and XML to JSON object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">soap</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">..</span><span class="dl">'</span><span class="p">).</span><span class="nx">soap</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">XMLHandler</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">XMLHandler</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">xmlHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHandler</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://www.webservicex.net/stockquote.asmx?WSDL</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">requestArgs</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">IBM</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">clientOptions</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">soap</span><span class="p">.</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">clientOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">customRequestHeader</span> <span class="o">=</span> <span class="p">{</span><span class="na">customheader1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">test1</span><span class="dl">'</span><span class="p">};</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">GetQuote</span><span class="p">(</span><span class="nx">requestArgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">envelope</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Convert 'result' JSON object to XML</span>
    <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">xmlHandler</span><span class="p">.</span><span class="nx">jsonToXml</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">XMLHandler</span><span class="p">.</span><span class="nx">createSOAPEnvelopeDescriptor</span><span class="p">(</span><span class="dl">'</span><span class="s1">soap</span><span class="dl">'</span><span class="p">),</span> <span class="nx">result</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">xml</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">end</span><span class="p">({</span><span class="na">pretty</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xml</span><span class="p">);</span>

    <span class="c1">// Convert XML to JSON object</span>
    <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">xmlHandler</span><span class="p">.</span><span class="nx">xmlToJson</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">xml</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">%s</span><span class="dl">'</span><span class="p">,</span> <span class="nx">util</span><span class="p">.</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span><span class="na">depth</span><span class="p">:</span> <span class="kc">null</span><span class="p">}));</span>

  <span class="p">},</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">customRequestHeader</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Parse XML string or stream into the XMLBuilder tree:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">XMLHandler</span><span class="p">.</span><span class="nx">parseXml</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">xmlString</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="wsdl">WSDL</h2>

<h3 id="wsdlopenwsdlurl-options-callbackerr-wsdl">wsdl.open(wsdlURL, options, callback(err, wsdl))</h3>

<p>Loads WSDL into a tree form. Traverse through WSDL tree to get to bindings, services, ports, operations, and so on.</p>

<p>Parameters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">wsdlURL</code> WSDL url to load.</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> WSDL options</li>
  <li><code class="language-plaintext highlighter-rouge">callback</code> Error and WSDL loaded into object tree.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">soap</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">..</span><span class="dl">'</span><span class="p">).</span><span class="nx">soap</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">WSDL</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">WSDL</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Pass in WSDL options if any</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">WSDL</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">'</span><span class="s1">./wsdls/stockquote.wsdl</span><span class="dl">'</span><span class="p">,</span><span class="nx">options</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">wsdl</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// You should be able to get to any information of this WSDL from this object. Traverse</span>
    <span class="c1">// the WSDL tree to get  bindings, operations, services, portTypes, messages,</span>
    <span class="c1">// parts, and XSD elements/Attributes.</span>

    <span class="kd">var</span> <span class="nx">getQuoteOp</span> <span class="o">=</span> <span class="nx">wsdl</span><span class="p">.</span><span class="nx">definitions</span><span class="p">.</span><span class="nx">bindings</span><span class="p">.</span><span class="nx">StockQuoteSoap</span><span class="p">.</span><span class="nx">operations</span><span class="p">.</span><span class="nx">GetQuote</span><span class="p">;</span>
    <span class="c1">// print operation name</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getQuoteOp</span><span class="p">.</span><span class="nx">$name</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">wsdl</span><span class="p">.</span><span class="nx">definitions</span><span class="p">.</span><span class="nx">services</span><span class="p">[</span><span class="dl">'</span><span class="s1">StockQuote</span><span class="dl">'</span><span class="p">];</span>
    <span class="c1">//print service name</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">service</span><span class="p">.</span><span class="nx">$name</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="wsdlopensyncwsdlurl-options">wsdl.openSync(wsdlURL, options)</h3>

<p>Loads WSDL into a tree form directly from memory. It traverses through WSDL tree to get to bindings, services, ports, operations, and so on as long as you have your dependent WSDLs and schemas are loaded and available in the <code class="language-plaintext highlighter-rouge">options.WSDL_CACHE</code>. If any I/O is required to retrieve any dependencies this call will throw an error.</p>

<p>Parameters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">wsdlURL</code> WSDL url to load as named in the cache.</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> WSDL options</li>
</ul>

<p>An example of loading WSDLs into your <code class="language-plaintext highlighter-rouge">options.WSDL_CACHE</code> and calling <code class="language-plaintext highlighter-rouge">wsdl.loadSync()</code> can be found in the test <a href="https://github.com/strongloop/strong-soap/tree/master/test/wsdl-load-from-memory-test.js">test/wsdl-load-from-memory-test</a></p>

<h2 id="server">Server</h2>

<h3 id="soaplistenserver-path-services-wsdl">soap.listen(<em>server</em>, <em>path</em>, <em>services</em>, <em>wsdl</em>)</h3>

<p>Creates a new SOAP server that listens on <em>path</em> and provides <em>services</em>.</p>

<p><em>wsdl</em> is an xml string that defines the service.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="nx">myService</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MyService</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">MyPort</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">MyFunction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
                  <span class="k">return</span> <span class="p">{</span>
                      <span class="na">name</span><span class="p">:</span> <span class="nx">args</span><span class="p">.</span><span class="nx">name</span>
                  <span class="p">};</span>
              <span class="p">},</span>

              <span class="c1">// This is how to define an asynchronous function.</span>
              <span class="na">MyAsyncFunction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
                  <span class="c1">// do some work</span>
                  <span class="nx">callback</span><span class="p">({</span>
                      <span class="na">name</span><span class="p">:</span> <span class="nx">args</span><span class="p">.</span><span class="nx">name</span>
                  <span class="p">});</span>
              <span class="p">},</span>

              <span class="c1">// This is how to receive incoming headers</span>
              <span class="na">HeadersAwareFunction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
                  <span class="k">return</span> <span class="p">{</span>
                      <span class="na">name</span><span class="p">:</span> <span class="nx">headers</span><span class="p">.</span><span class="nx">Token</span>
                  <span class="p">};</span>
              <span class="p">},</span>

              <span class="c1">// You can also inspect the original `req`</span>
              <span class="na">reallyDeatailedFunction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">SOAP `reallyDeatailedFunction` request from </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">connection</span><span class="p">.</span><span class="nx">remoteAddress</span><span class="p">);</span>
                  <span class="k">return</span> <span class="p">{</span>
                      <span class="na">name</span><span class="p">:</span> <span class="nx">headers</span><span class="p">.</span><span class="nx">Token</span>
                  <span class="p">};</span>
              <span class="p">}</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">xml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">).</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">myservice.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">),</span>
      <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">"</span><span class="s2">404: Not Found: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
      <span class="p">});</span>

  <span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
  <span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="dl">'</span><span class="s1">/wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="nx">myService</span><span class="p">,</span> <span class="nx">xml</span><span class="p">);</span>
</code></pre></div></div>

<p>An example of using the SOAP server is in <a href="https://github.com/strongloop/strong-soap/tree/master/test/server-client-document-test.js">test/server-client-document-test</a></p>

<h3 id="options">Options</h3>

<p>You can pass in server and <a href="#handling-xml-attributes-value-and-xml-wsdloptions">WSDL Options</a>
using an options hash.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">xml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">).</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">myservice.wsdl</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">// Server options.</span>
    <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/wsdl</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">services</span><span class="p">:</span> <span class="nx">myService</span><span class="p">,</span>
    <span class="na">xml</span><span class="p">:</span> <span class="nx">xml</span><span class="p">,</span>

    <span class="c1">// WSDL options.</span>
    <span class="na">attributesKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theAttrs</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">valueKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theVal</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">xmlKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">theXml</span><span class="dl">'</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="server-logging">Server logging</h3>

<p>If the <code class="language-plaintext highlighter-rouge">log</code> method is defined it will be called with ‘received’ and ‘replied’
along with data.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">server</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(...)</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// type is 'received' or 'replied'</span>
  <span class="p">};</span>
</code></pre></div></div>

<h3 id="server-events">Server events</h3>

<p>Server instances emit the following events:</p>

<ul>
  <li>request - Emitted for every received messages.
The signature of the callback is <code class="language-plaintext highlighter-rouge">function(request, methodName)</code>.</li>
  <li>headers - Emitted when the SOAP Headers are not empty.
The signature of the callback is <code class="language-plaintext highlighter-rouge">function(headers, methodName)</code>.</li>
</ul>

<p>The sequence order of the calls is <code class="language-plaintext highlighter-rouge">request</code>, <code class="language-plaintext highlighter-rouge">headers</code> and then the dedicated
service method.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">test</span><span class="p">.</span><span class="nx">soapServer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">requestManager</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">methodName</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">methodName</span><span class="p">,</span> <span class="dl">'</span><span class="s1">GetLastTradePrice</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">done</span><span class="p">();</span>
    <span class="p">});</span>

</code></pre></div></div>

<p>An example of using the SOAP server is in <a href="https://github.com/strongloop/strong-soap/tree/master/test/server-test.js">test/server-test</a></p>

<h3 id="soap-fault">SOAP Fault</h3>

<p>A service method can reply with a SOAP Fault to a client by <code class="language-plaintext highlighter-rouge">throw</code>ing an
object with a <code class="language-plaintext highlighter-rouge">Fault</code> property.</p>

<p>Example SOAP 1.1 Fault:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">test</span><span class="p">.</span><span class="nx">service</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">DocLiteralWrappedService</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">DocLiteralWrappedPort</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">myMethod</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="p">{</span>
              <span class="na">Fault</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">faultcode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sampleFaultCode</span><span class="dl">"</span><span class="p">,</span>
                  <span class="na">faultstring</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sampleFaultString</span><span class="dl">"</span><span class="p">,</span>
                  <span class="na">detail</span><span class="p">:</span>
                    <span class="p">{</span> <span class="na">myMethodFault</span><span class="p">:</span>
                      <span class="p">{</span><span class="na">errorMessage</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MyMethod Business Exception message</span><span class="dl">'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>SOAP 1.2 Fault:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">test</span><span class="p">.</span><span class="nx">service</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">DocLiteralWrappedService</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">DocLiteralWrappedPort</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">myMethod</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">soapHeader</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="p">{</span>
              <span class="na">Fault</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">Code</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">Value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">soap:Sender</span><span class="dl">"</span><span class="p">,</span>
                  <span class="na">Subcode</span><span class="p">:</span> <span class="p">{</span> <span class="na">Value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">rpc:BadArguments</span><span class="dl">"</span> <span class="p">}</span>
                <span class="p">},</span>
                <span class="na">Reason</span><span class="p">:</span> <span class="p">{</span> <span class="na">Text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Processing Error</span><span class="dl">"</span> <span class="p">},</span>
                <span class="na">Detail</span><span class="p">:</span>
                <span class="p">{</span><span class="na">myMethodFault2</span><span class="p">:</span>
                   <span class="p">{</span><span class="na">errorMessage2</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MyMethod Business Exception message</span><span class="dl">'</span><span class="p">,</span> <span class="na">value2</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>Examples of  SOAP 1.1/SOAP 1.2 Fault response can be found in test <a href="https://github.com/strongloop/strong-soap/tree/master/test/server-client-document-test.js">test/server-client-document-test</a></p>

<h3 id="server-security-example-using-passworddigest">Server security example using PasswordDigest</h3>

<p>If <code class="language-plaintext highlighter-rouge">server.authenticate</code> is not defined then no authentication will take place.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">server</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(...)</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">authenticate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">security</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">created</span><span class="p">,</span> <span class="nx">nonce</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">token</span><span class="p">;</span>
    <span class="nx">token</span> <span class="o">=</span> <span class="nx">security</span><span class="p">.</span><span class="nx">UsernameToken</span><span class="p">,</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">token</span><span class="p">.</span><span class="nx">Username</span><span class="p">,</span>
            <span class="nx">password</span> <span class="o">=</span> <span class="nx">token</span><span class="p">.</span><span class="nx">Password</span><span class="p">,</span> <span class="nx">nonce</span> <span class="o">=</span> <span class="nx">token</span><span class="p">.</span><span class="nx">Nonce</span><span class="p">,</span> <span class="nx">created</span> <span class="o">=</span> <span class="nx">token</span><span class="p">.</span><span class="nx">Created</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">user</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">password</span> <span class="o">===</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">passwordDigest</span><span class="p">(</span><span class="nx">nonce</span><span class="p">,</span> <span class="nx">created</span><span class="p">,</span> <span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>
</code></pre></div></div>

<h3 id="server-connection-authorization">Server connection authorization</h3>

<p>The <code class="language-plaintext highlighter-rouge">server.authorizeConnection</code> method is called prior to the soap service method.
If the method is defined and returns <code class="language-plaintext highlighter-rouge">false</code> then the incoming connection is
terminated.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">server</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(...)</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">authorizeConnection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// or false</span>
  <span class="p">};</span>
</code></pre></div></div>

<h2 id="soap-headers">SOAP headers</h2>

<h3 id="received-soap-headers">Received SOAP headers</h3>

<p>A service method can look at the SOAP headers by providing a third arguments.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">{</span>
      <span class="nl">HeadersAwareFunction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">{</span>
              <span class="na">name</span><span class="p">:</span> <span class="nx">headers</span><span class="p">.</span><span class="nx">Token</span>
          <span class="p">};</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>It is also possible to subscribe to the ‘headers’ event.
The event is triggered before the service method is called, and only when the
SOAP Headers are not empty.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">server</span> <span class="o">=</span> <span class="nx">soap</span><span class="p">.</span><span class="nx">listen</span><span class="p">(...)</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">methodName</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// It is possible to change the value of the headers</span>
    <span class="c1">// before they are handed to the service method.</span>
    <span class="c1">// It is also possible to throw a SOAP Fault</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>First parameter is the Headers object;
second parameter is the name of the SOAP method that will called
(in case you need to handle the headers differently based on the method).</p>

<h3 id="outgoing-soap-headers">Outgoing SOAP headers</h3>

<p>Both client and server can define SOAP headers that will be added to what they send.
They provide the following methods to manage the headers.</p>

<h4 id="addsoapheadervalue-qname">addSoapHeader(value, qname)</h4>

<p>Adds soapHeader to soap:Header node.</p>

<p>Parameters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">value</code> JSON object representing {headerName: headerValue} or XML string.</li>
  <li><code class="language-plaintext highlighter-rouge">qname</code> qname used for the header</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>addSoapHeader(value, qname, options);
</code></pre></div></div>

<p>Returns the index where the header is inserted.</p>

<h4 id="changesoapheaderindex-value-qname">changeSoapHeader(index, value, qname)</h4>

<p>Changes an existing soapHeader.</p>

<p>Parameters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">index</code> index of the header to replace with provided new value</li>
  <li><code class="language-plaintext highlighter-rouge">value</code> JSON object representing {headerName: headerValue} or XML string.</li>
  <li><code class="language-plaintext highlighter-rouge">qname</code> qname used for the header</li>
</ul>

<h4 id="getsoapheaders">getSoapHeaders()</h4>

<p>Returns all defined headers.</p>

<h4 id="clearsoapheaders">clearSoapHeaders()</h4>

<p>Removes all defined headers.</p>

<p>Examples of using SOAP header API are in: <a href="https://github.com/strongloop/strong-soap/tree/master/test/server-test.js">test/server-test</a> and  <a href="https://github.com/strongloop/strong-soap/tree/master/test/client-test.js">test/server-test</a></p>

<h2 id="soap-stub">soap-stub</h2>

<p>Unit testing services that use SOAP clients can be very cumbersome.  To get
around this you can use <code class="language-plaintext highlighter-rouge">soap-stub</code> in conjunction with <code class="language-plaintext highlighter-rouge">sinon</code> to stub soap with
your clients.</p>

<h3 id="example">Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">sinon</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sinon</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">soapStub</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">strong-soap/soap-stub</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">urlMyApplicationWillUseWithCreateClient</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">./example/stockquote.wsdl</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">clientStub</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">SomeOperation</span><span class="p">:</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">stub</span><span class="p">()</span>
<span class="p">};</span>

<span class="nx">clientStub</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">.</span><span class="nx">respondWithError</span> <span class="o">=</span> <span class="nx">soapStub</span><span class="p">.</span><span class="nx">createRespondingStub</span><span class="p">({</span><span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">});</span>
<span class="nx">clientStub</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">.</span><span class="nx">respondWithSuccess</span> <span class="o">=</span> <span class="nx">soapStub</span><span class="p">.</span><span class="nx">createRespondingStub</span><span class="p">({</span><span class="na">success</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
<span class="c1">// or if you are using promises</span>
<span class="nx">clientStub</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">.</span><span class="nx">respondWithError</span> <span class="o">=</span> <span class="nx">soapStub</span><span class="p">.</span><span class="nx">createRespondingStubAsync</span><span class="p">({</span><span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">});</span>
<span class="nx">clientStub</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">.</span><span class="nx">respondWithSuccess</span> <span class="o">=</span> <span class="nx">soapStub</span><span class="p">.</span><span class="nx">createRespondingStubAsync</span><span class="p">({</span><span class="na">success</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>


<span class="nx">soapStub</span><span class="p">.</span><span class="nx">registerClient</span><span class="p">(</span><span class="dl">'</span><span class="s1">my client alias</span><span class="dl">'</span><span class="p">,</span> <span class="nx">urlMyApplicationWillUseWithCreateClient</span><span class="p">,</span> <span class="nx">clientStub</span><span class="p">);</span>


<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">assert</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">lastReqAddress</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">myService</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">clientStub</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">myService</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">clientStub</span> <span class="o">=</span> <span class="nx">soapStub</span><span class="p">.</span><span class="nx">getStub</span><span class="p">(</span><span class="dl">'</span><span class="s1">my client alias</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">soapStub</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="nx">myService</span> <span class="o">=</span> <span class="nx">clientStub</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">failures</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">clientStub</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">.</span><span class="nx">respondWithError</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should handle error responses</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">myService</span><span class="p">.</span><span class="nx">SomeOperation</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// handle the error response.</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>

</code></pre></div></div>

<h2 id="contributors">Contributors</h2>

<ul>
  <li><a href="https://github.com/strongloop/strong-soap/graphs/contributors">All Contributors</a></li>
</ul>


    <div class="tags">
      
    </div>
</div>

<hr class="shaded"/>

<footer id="container">
            <div class="row">
                <div class="col-md-6 footer-left">
               &copy;2021 IBM / StrongLoop. All rights reserved. <br />
 Site last generated: Mar 22, 2021
              </div>
              <div class="col-md-6 footer-right">
                <p><img src="https://loopback.io/images/company_logo.png" alt="Company logo"/></p>
              </div>
            </div>
</footer>


        </div>
        <!-- /.row -->
</div>
<!-- /.container -->
    </div>
</body>

</html>
