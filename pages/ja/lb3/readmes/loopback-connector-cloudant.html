<!DOCTYPE html>
<head>
    

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="keywords" content=" ">
  <title>loopback-connector-cloudant | LoopBack Documentation</title>
  <link rel="stylesheet" href="/css/syntax.css">

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/modern-business.css">
    <link rel="stylesheet" href="/css/lavish-bootstrap.css">
    <link rel="stylesheet" href="/css/customstyles.css">
    <link rel="stylesheet" href="/css/theme-v4.css">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150726441-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150726441-2');
</script>


    <!-- github star button -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>


    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
    <script src="/js/toc.js"></script>
    <script src="/js/customscripts.js"></script>

    <link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->


    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand no_icon" href="/doc/index.html">
              <img class="no_icon" style="width:147px;" src="/images/branding/logo/white/loopback.svg">&nbsp;<span class="projectTitle"></span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Docs<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://loopback.io/doc/en/lb4/apidocs.index.html" target="_blank">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="http://apidocs.loopback.io" target="_blank">LoopBack 3.x</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">View<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is / -->
                          
                            <li><a href="/">LoopBack Overview</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/lb4/ -->
                          
                            <li><a href="/doc/en/lb4/">LoopBack 4</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/lb3/ -->
                          
                            <li><a href="/doc/en/lb3/">LoopBack 3.x</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/lb2/ -->
                          
                            <li><a href="/doc/en/lb2/">LoopBack 2.x</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/community/ -->
                          
                            <li><a href="/doc/en/community/">Community projects</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/contrib/ -->
                          
                            <li><a href="/doc/en/contrib/">Contributing to LoopBack</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/en/sec/ -->
                          
                            <li><a href="/doc/en/sec/">Security advisories</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://github.com/strongloop/loopback.io" target="_blank">Docs Github Repo</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs-announcements" target="_blank">Announcements Mailing List</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://groups.google.com/forum/#!forum/loopbackjs" target="_blank">Developer Forum</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw" target="_blank">LoopBack on Slack</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://stackoverflow.com/questions/tagged/strongloop+or+loopback4+or+loopbackjs" target="_blank">LoopBack on Stack Overflow</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is  -->
                          
                            <li><a href="https://strongloop.com/strongblog/tag_LoopBack.html" target="_blank">StrongLoop Blog - LoopBack</a></li>
                          
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Translations<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/es/lb2/ -->
                          
                            <li><a href="/doc/es/lb2/">Español (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/es/lb4/ -->
                          
                            <li><a href="/doc/es/lb4/">Español (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/fr/lb2/ -->
                          
                            <li><a href="/doc/fr/lb2/">Français (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/fr/lb4/ -->
                          
                            <li><a href="/doc/fr/lb4/">Français (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ko/lb2/ -->
                          
                            <li><a href="/doc/ko/lb2/">한국어 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ko/lb3/ -->
                          
                            <li><a href="/doc/ko/lb3/">한국어 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/pt-br/lb2/ -->
                          
                            <li><a href="/doc/pt-br/lb2/">Português (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/pt-br/lb4/ -->
                          
                            <li><a href="/doc/pt-br/lb4/">Português (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ja/lb2/ -->
                          
                            <li><a href="/doc/ja/lb2/">日本語 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ja/lb3/ -->
                          
                            <li><a href="/doc/ja/lb3/">日本語 (v3)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ja/lb4/ -->
                          
                            <li><a href="/doc/ja/lb4/">日本語 (v4)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/ru/lb2/ -->
                          
                            <li><a href="/doc/ru/lb2/">Pусский (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/zh/lb2/ -->
                          
                            <li><a href="/doc/zh/lb2/">中文 (v2)</a></li>
                          
                        
                        <!-- page.url is /pages/ja/lb3/readmes/loopback-connector-cloudant.html .... folderitem.url is /doc/zh/lb4/ -->
                          
                            <li><a href="/doc/zh/lb4/">中文 (v4)</a></li>
                          
                        
                    </ul>
                </li>
                
                
                
                <li>
                    <form id="search" name="search" class="input-group lb-search" action="/search" method="GET">
                        <input type="text" class="form-control search-bar" placeholder="Search (powered by Watson)" name="q">
                        
                          <input type="hidden" name="sidebar" value="lb3_sidebar">
                        
                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-default" aria-label="search">
                              <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                            </button>
                        </div>
                      </form>
                </li>
            </ul>
        </div>
      </div>
</nav>

<!-- Page Content -->
<div class="container">
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <nav class="col-md-3 sidebar-col">
          











<!-- NOTE: sidebar = site.data.sidebars.mydoc_sidebar.entries -->
<div class="sidebarTitle"><a href="index.html">LoopBack 3.x</a></div>
<ul id="mysidebar" class="nav-list">
  

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Installation.html">Installation</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installation-troubleshooting.html">Installation troubleshooting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="3.0-Release-Notes.html">3.0 Release Notes</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Migrating-to-3.0.html">Migrating apps to v3</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-core-concepts.html">LoopBack core concepts</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Routing.html">Routing</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-FAQ.html">LoopBack FAQ</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Glossary.html">Glossary</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="StrongLoop-Labs.html">StrongLoop Labs</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-with-LoopBack.html">Getting started with LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-a-simple-API.html">Create a simple API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Use-API-Explorer.html">Use API Explorer</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connect-your-API-to-a-data-source.html">Connect your API to a data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extend-your-API.html">Extend your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-static-web-page.html">Add a static web page</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Add-a-custom-Express-route.html">Add a custom Express route</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Next-steps.html">Next steps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Deploy-for-GDPR-readiness.html">Considerations for GDPR readiness</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Getting-started-part-II.html">Getting started part II</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introducing-the-Coffee-Shop-Reviews-app.html">Introducing the Coffee Shop Reviews app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-data-source.html">Create new data source</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-new-models.html">Create new models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-model-relations.html">Define model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-access-controls.html">Define access controls</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Define-a-remote-hook.html">Define a remote hook</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Create-AngularJS-client.html">Create AngularJS client</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Learn-more.html">Learn more</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorials-and-examples.html">Tutorials and examples</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-an-application.html">Creating an application</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Environment-specific-configuration.html">Environment-specific configuration</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Versioning-your-API.html">Versioning your API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Standard-project-structure.html">Standard project structure</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-data-sources.html">Defining data sources</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-database-schema-from-models.html">Creating a database schema from models</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data-sources.html">Data sources: advanced topics</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-database-transactions.html">Using database transactions</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Executing-native-SQL.html">Executing native SQL</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Building-a-connector.html">Building a connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-create-retrieve-update-and-delete-methods.html">Implementing CRUD methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-model-discovery.html">Implementing model discovery</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Implementing-auto-migration.html">Implementing auto-migration</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Defining-models.html">Defining models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-the-model-generator.html">Using the model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Discovering-models-from-relational-databases.html">Discovering models from relational databases</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-models-from-unstructured-data.html">Creating models from unstructured data</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Customizing-models.html">Customizing models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Exposing-models-over-REST.html">Exposing models over REST</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Validating-model-data.html">Validating model data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Creating-model-relations.html">Creating model relations</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-model-relations.html">Tutorial: model relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="BelongsTo-relations.html">BelongsTo relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasOne-relations.html">HasOne relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasMany-relations.html">HasMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasManyThrough-relations.html">HasManyThrough relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="HasAndBelongsToMany-relations.html">HasAndBelongsToMany relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Polymorphic-relations.html">Polymorphic relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Querying-related-models.html">Querying related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Embedded-models-and-relations.html">Embedded models and relations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Nested-queries.html">Nested queries</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Using-built-in-models.html">Using built-in models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Extending-built-in-models.html">Extending built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Adding-remote-methods-to-built-in-models.html">Adding remote methods to built-in models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-property-reference.html">Model property reference</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Built-in-models-REST-API.html">Built-in models REST API</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="PersistedModel-REST-API.html">PersistedModel REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Access-token-REST-API.html">Access token REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-REST-API.html">ACL REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-REST-API.html">Application REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-REST-API.html">Relation REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Role-REST-API.html">Role REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-REST-API.html">User REST API</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Attaching-models-to-data-sources.html">Attaching models to data sources</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Managing-users.html">Managing users</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Registering-users.html">Registering users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Logging-in-users.html">Logging in users</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Partitioning-users-with-realms.html">Partitioning users with realms</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="User-management-example.html">User management example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Authentication-authorization-and-permissions.html">Authentication, authorization, and permissions</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Introduction-to-User-model-authentication.html">Introduction to User model authentication</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Controlling-data-access.html">Controlling data access</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Making-authenticated-requests.html">Making authenticated requests</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-and-using-roles.html">Defining and using roles</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Accessing-related-models.html">Accessing related models</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-a-default-admin-user.html">Creating a default admin user</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Security-considerations.html">Security considerations</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-access-control.html">Tutorial: access control</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Working-with-data.html">Working with data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-updating-and-deleting-data.html">Creating, updating, and deleting data</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Querying-data.html">Querying data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Fields-filter.html">Fields filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Include-filter.html">Include filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Limit-filter.html">Limit filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Order-filter.html">Order filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Skip-filter.html">Skip filter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Where-filter.html">Where filter</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Advanced-topics-data.html">Advanced topics: data</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-server-sent-events.html">Realtime server-sent events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet.html">AngularJS Live Set</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-LiveSet-Example.html">AngularJS Live Set example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Realtime-socket-io.html">Real-time apps AngularJS using socket.io</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-application-logic.html">Adding application logic</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-LoopBack-objects.html">Working with LoopBack objects</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Adding-logic-to-models.html">Adding logic to models</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-methods.html">Remote methods</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-hooks.html">Remote hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Operation-hooks.html">Operation hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connector-hooks.html">Connector hooks</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Adding-application-logic.html">Tutorial: Application logic</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-boot-scripts.html">Defining boot scripts</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-mixins.html">Defining mixins</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Defining-middleware.html">Defining middleware</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-example.html">Middleware example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-current-context.html">Using current context</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Events.html">Events</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-promises.html">Using promises</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Running-and-debugging-apps.html">Running and debugging apps</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Setting-debug-strings.html">Setting debug strings</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-strong-error-handler.html">Using strong-error-handler</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Preparing-for-deployment.html">Preparing for deployment</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-on-Bluemix.html">Running LoopBack apps on Bluemix</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-components.html">LoopBack components</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OAuth-2.0.html">OAuth 2.0 component</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Push-notifications.html">Push notification component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-iOS-apps.html">Push notifications for iOS apps</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-for-Android-apps.html">Push notifications for Android apps</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Storage-component.html">Storage component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-component-REST-API.html">Storage component REST API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-example.html">Storage component example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Third-party-login-using-Passport.html">Passport login component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Configuring-providers.json.html">Configuring providers.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-third-party-login.html">Tutorial: third-party login</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Synchronization.html">Synchronization component</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-Offline-Synchronization.html">Tutorial: Offline Synchronization</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Advanced-topics-sync.html">Advanced topics - sync</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Creating-components.html">Creating components</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Command-line-tools.html">Command-line tools</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="ACL-generator.html">ACL generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="API-definition-generator.html">API definition generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Application-generator.html">Application generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Bluemix-config-generator.html">Bluemix configuration generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Boot-script-generator.html">Boot script generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Data-source-generator.html">Data source generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Middleware-generator.html">Middleware generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-generator.html">Model generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Oracle-installer-command.html">Oracle installer command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Property-generator.html">Property generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Refresh-definitions-command.html">Refresh definitions command</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Relation-generator.html">Relation generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-method-generator.html">Remote method generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-generator.html">SOAP generator</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-generator.html">Swagger generator</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Client-SDKs.html">Client SDKs</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="iOS-SDK.html">iOS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="IOS-getting-started.html">Getting started with the iOS SDK</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Android-SDK.html">Android SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Tutorial-android-getting-started.html">Getting started with the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-files-using-the-Android-SDK.html">Working with files using the Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-notifications-using-Android-SDK.html">Push notifications using Android SDK</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Working-with-the-LocalInstallation-class.html">Working with the LocalInstallation class</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="AngularJS-JavaScript-SDK.html">AngularJS SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Angular-example-app.html">Angular example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="AngularJS-Grunt-plugin.html">AngularJS Grunt plugin</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Xamarin-SDK.html">Xamarin SDK</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-client-API.html">Xamarin client API</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Xamarin-example-app.html">Xamarin example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="LoopBack-in-the-client.html">Isomorphic LoopBack</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Running-LoopBack-in-the-browser.html">Running LoopBack in the browser</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-Browserify.html">Using Browserify</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Isomorphic-LoopBack-example.html">Isomorphic example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Connectors-reference.html">Connectors reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Memory-connector.html">Memory connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Database-connectors.html">Database connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cassandra-connector.html">Cassandra connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Cloudant-connector.html">Cloudant connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Couchdb2-connector.html">CouchDB 2.x connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DashDB.html">DashDB</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-connector.html">DB2 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-iSeries-connector.html">DB2 for iSeries connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="DB2-for-z-OS.html">DB2 for z/OS</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="gRPC-connector.html">gRPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Informix.html">Informix connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MongoDB-connector.html">MongoDB connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MongoDB.html">MongoDB Connector Tutorial</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Using-MongoLab.html">Using MongoLab</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="MySQL-connector.html">MySQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-MySQL.html">MySQL Connector Tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="OpenAPI-connector.html">OpenAPI connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Oracle-connector.html">Oracle connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Installing-the-Oracle-connector.html">Installing the Oracle connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Oracle.html">Oracle connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="PostgreSQL-connector.html">PostgreSQL connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-PostgreSQL.html">PostgreSQL connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-connector.html">Redis connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="kv-redis-connector.html">Redis key-value connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Example-kv-connector.html">KV connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SQL-Server-connector.html">SQL Server connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-Microsoft-SQL-Server.html">SQL Server connector tutorial</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SQLite3.html">SQLite3 connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="zOSconnectEE.html">z/OS Connect Enterprise Edition connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Other-connectors.html">Other connectors</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Email-connector.html">Email connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="JSON-RPC-connector.html">JSON RPC connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQLight-connector.html">MQ Light connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Push-connector.html">Push connector</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Remote-connector.html">Remote connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Remote-connector-example.html">Remote connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-Remoting.html">Strong Remoting</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="REST-connector.html">REST connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="REST-connector-example.html">REST connector example</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="SOAP-connector.html">SOAP connector</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-soap.html">Strong-soap</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="SOAP-Connector-example.html">SOAP connector example</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connecting-to-SOAP.html">Connecting to SOAP web services</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Storage-connector.html">Storage connector</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Swagger-connector.html">Swagger connector</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Community-connectors.html">Community connectors</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Project-layout-reference.html">Project layout reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="client-directory.html">client directory</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="common-directory.html">common directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-definition-JSON-file.html">Model definition JSON file</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Model-extension-file.html">Model extension file</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="package.json.html">package.json</a>
    
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="server-directory.html">server directory</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="component-config.json.html">component-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="config.json.html">config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="datasources.json.html">datasources.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.json.html">middleware.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="middleware.development.json.html">middleware.development.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="model-config.json.html">model-config.json</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="server.js.html">server.js</a>
    
      
  </li>
  



      </ul>
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Node-reference.html">Node reference</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-types.html">LoopBack types</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Geotype.html">Geopoint type</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Valid-names-in-LoopBack.html">Valid names in LoopBack</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Basic-model-object.html">Basic model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Connected-model-object.html">Connected model object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Error-object.html">Error object</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="LoopBack-middleware.html">LoopBack middleware</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class="  tree-parent   ">
     <a class="show-hide" href="#"></span> 
    
      <a class="page-link" href="Publish-subscribe-messaging.html">Publish-subscribe messaging</a>
    
      
      <ul class="nav-list">
          

  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Strong-pub-sub.html">Strong Pub-sub</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-bridge.html">Pub-sub bridge</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="MQTT-adapter.html">MQTT adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Redis-pub-sub-adapter.html">Redis pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Primus-pub-sub-adapter.html">Primus pub-sub adapter</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-example.html">Node pub-sub example app</a>
    
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="Pub-sub-Loopback-example.html">LoopBack pub-sub example app</a>
    
      
  </li>
  



      </ul>
      
  </li>
  


  
  
  <li class=" leaf-node  ">
    
    
      <a class="page-link" href="All-tags.html">All tags</a>
    
      
  </li>
  



</ul>

        </nav>
        <!-- Content Column -->
        <div class="col-md-9">
            
  <div class="v3notice">
LoopBack 3 has reached end of life. We are no longer accepting pull requests or providing 
support for community users. The only exception is fixes for critical bugs and security 
vulnerabilities provided as part of support for IBM API Connect customers.
We urge all LoopBack 3 users to migrate their applications to LoopBack 4 as soon as possible. 
Learn more about
<a href="https://loopback.io/doc/en/contrib/Long-term-support.html">LoopBack's long term support policy.</a>
</div>


<div class="post-header">
   <h1 class="post-title-main">loopback-connector-cloudant</h1>
   
     
       <a target="_blank" href="https://github.com/strongloop/loopback.io/blob/gh-pages/pages/pages/ja/lb3/readmes/loopback-connector-cloudant.md" class="githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit this page</a>
   
</div>

<div class="post-content">


  




 
   
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
;$(function() {
  var level = parseInt(3, 10);
  if (level === 1) {level = 'h2'}
  if (level === 2) {level = 'h2,h3'}
  if (level === 3) {level = 'h2,h3,h4'}
  if (level === 4) {level = 'h2,h3,h4,h5'}

  // Add a new level for changelog files which use h1,h2,h3
  if (level === 0) {level = 'h1,h2,h3,h4,h5'}

  var toc = $('#toc')

  toc.toc({minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: level})

  /* this offset helps with the space taken up by the floating toolbar */
  toc.on('click', 'a', function() {
    var target = $(this.getAttribute('href')),
      scroll_target = target.offset().top

    $(window).scrollTop(scroll_target - 10)
    return false
  })
  .on('click', '.toc-expand-button', function() {
    toc.find('> ul').slideToggle('fast');
  })
})
</script>

<div id="toc">
  <span class="toc-title">Page Contents</span>
  <button type="button" class="btn btn-link toc-expand-button">
    <i class="fa fa-bars"></i>
  </button>
</div>

 

    <h1 id="loopback-connector-cloudant">loopback-connector-cloudant</h1>

<p>IBM Cloudant® is a NoSQL database platform built for the cloud. You can
use Cloudant as a fully-managed DBaaS running on public cloud platforms
like Bluemix and SoftLayer or via an on-premises version called Cloudant
Local.</p>

<p>For more information, see <a href="https://www.ng.bluemix.net/docs/services/Cloudant/index.html">Getting started with Cloudant NoSQL DB</a></p>

<p>The <code class="language-plaintext highlighter-rouge">loopback-connector-cloudant</code> module is the Cloudant connector for the LoopBack framework.
<!-- TOC --></p>

<ul>
  <li><a href="#getting-started">Getting Started</a>
    <ul>
      <li><a href="#design">Design</a>
        <ul>
          <li><a href="#partial-update">Partial Update</a></li>
          <li><a href="#frequent-modification">Frequent Modification</a></li>
          <li><a href="#conflict-control">Conflict Control</a></li>
        </ul>
      </li>
      <li><a href="#model">Model</a>
        <ul>
          <li><a href="#map-between-model-and-document">Map Between Model And Document</a></li>
          <li><a href="#model-specific-configuration">Model-specific Configuration</a></li>
          <li><a href="#_rev-property">_rev Property</a>
            <ul>
              <li><a href="#example-crud-operations-with-_rev">Example CRUD operations with <code class="language-plaintext highlighter-rouge">_rev</code></a></li>
            </ul>
          </li>
          <li><a href="#force-id">Force Id</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#setup-cloudant-instance">Setup Cloudant Instance</a></li>
  <li><a href="#installation">Installation</a></li>
  <li><a href="#configuration">Configuration</a>
    <ul>
      <li><a href="#generate-datasource">Generate Datasource</a></li>
      <li><a href="#datasource-config">Datasource Config</a>
        <ul>
          <li><a href="#url-vs-username--password"><code class="language-plaintext highlighter-rouge">url</code> vs <code class="language-plaintext highlighter-rouge">username</code> &amp; <code class="language-plaintext highlighter-rouge">password</code></a></li>
          <li><a href="#advanced-configuration">Advanced configuration</a></li>
          <li><a href="#requests-plugin">Requests Plugin</a></li>
        </ul>
      </li>
      <li><a href="#example-usage">Example Usage</a></li>
    </ul>
  </li>
  <li><a href="#crud">CRUD</a>
    <ul>
      <li><a href="#update">Update</a></li>
    </ul>
  </li>
  <li><a href="#migration">Migration</a>
    <ul>
      <li><a href="#autoupdate-vs-automigrate">autoupdate vs automigrate</a></li>
      <li><a href="#isactual">isActual</a></li>
      <li><a href="#example-code">Example Code</a></li>
    </ul>
  </li>
  <li><a href="#discovery">Discovery</a></li>
  <li><a href="#query">Query</a></li>
  <li><a href="#view">View</a></li>
  <li><a href="#bulk-replace">Bulk replace</a></li>
  <li><a href="#testing">Testing</a>
      - <a href="#docker">Docker</a></li>
  <li><a href="#more-info">More Info</a></li>
  <li><a href="#feature-backlog">Feature backlog</a>
    <ul>
      <li><a href="#index">Index</a></li>
    </ul>
  </li>
</ul>

<!-- /TOC -->

<h1 id="getting-started">Getting Started</h1>

<h2 id="design">Design</h2>
<p>LoopBack tries best to fit its model to a specific database’s design, while limited by the nature of database, it’s not always possible to support all LoopBack features perfectly, and user should be aware of some key features about Cloudant before they start to design a Cloudant model.</p>

<h3 id="partial-update">Partial Update</h3>

<p><em>Cloudant does not support the idea of updating a document. All “updates” on a document are _destructive_ replacements.</em></p>

<p>It implies that if you do want to partially update a document, please make sure unchanged values are included in the update object.</p>

<p>For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// original document
{
  "id": ...,
  "_rev": ...,
  "prop1": "1",
  "prop2": "2",
}

// data to be updated
ds.updateOrCreate('User', {
  prop1: 'updated1',
}, function (err, res) {});

// document after update
{
  "id": ...,
  "_rev": ...,
  "prop1": "updated1",
}
</code></pre></div></div>

<p><em>Please note how property <code class="language-plaintext highlighter-rouge">prop2</code> was completely dropped upon update.</em></p>

<p>We have some discussion on update methods, the issue link can be found in <a href="https://github.com/strongloop/loopback-connector-cloudant#feature-backlog">Feature Backlog</a> section</p>

<h3 id="frequent-modification">Frequent Modification</h3>

<p>Cloudant is not designed to change same document frequently and multiple times. It stores status changes by creating different documents and including the same unique id to tell that they are attached to the same item, not updating the same document.</p>

<p>By modeling the data in separate documents that are only written once, we can reduce the chance of concurrent access to the same document by separate processes.</p>

<p>And by properly controlling the conflict, developer can still do a safe modify. For details, refer to <a href="https://github.com/strongloop/loopback-connector-cloudant#conflict-control">Conflict Control</a></p>

<h3 id="conflict-control">Conflict Control</h3>

<p>The basic idea is when modifying a document, user needs to control conflict by handling the revision of a document, currently the connector controls this process, after retriving the latest revision, connector uses it to update/delete doc, and returns 409 conflict error if doc changes during that time slot. In the middle, user could not interfere and provide their own conflict solution.</p>

<h2 id="model">Model</h2>

<h3 id="map-between-model-and-document">Map Between Model And Document</h3>

<p>Unlike relational db or mongodb, Cloudant doesn’t have a concept as ‘table’ or ‘collection’, data in a Cloudant database are all stored as documents.</p>

<p>The connector uses a design document to represent a LoopBack model, and common documents to represent model instances.</p>

<p>The following is a comparison among different databases:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Model</th>
      <th>Model Property</th>
      <th>Model Instance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Relational DB</td>
      <td>table</td>
      <td>column in table</td>
      <td>row in table</td>
    </tr>
    <tr>
      <td>Mongodb</td>
      <td>collection</td>
      <td>createIndex if property.index is true</td>
      <td>document in collection</td>
    </tr>
    <tr>
      <td>Cloudant</td>
      <td>Design documents in database</td>
      <td>NOT stored in document</td>
      <td>common documents in database</td>
    </tr>
  </tbody>
</table>

<p>To create a model, the connector creates a design document with the following config:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type: 'text',
name: 'lb-index-' + modelName,
ddoc: 'lb-index-ddoc-' + modelName,
index: {
  default_field: {
    enabled: false,
  },
  selector: {
    [modelIndex]: modelName
  },
},
</code></pre></div></div>

<p>By default, <code class="language-plaintext highlighter-rouge">modelIndex</code> is ‘loopback__model__name’, and <code class="language-plaintext highlighter-rouge">modelSelector</code> is {[modelIndex]: modelName}. User can customize <code class="language-plaintext highlighter-rouge">modelSelector</code> and <code class="language-plaintext highlighter-rouge">modelIndex</code> in datasource’s json file, for details please check <a href="https://github.com/strongloop/loopback-connector-cloudant#model-specific-configuration">model-specific configuration</a></p>

<p>To create a model instance, the connector creates a non-design document with value of property ‘loopback__model__name’ equals to <code class="language-plaintext highlighter-rouge">modelName</code>.</p>

<p>For model properties, we plan to create index for property that has config <code class="language-plaintext highlighter-rouge">index: true</code>. In the future, it will be the same way as what mongodb connector does.</p>

<h3 id="model-specific-configuration">Model-specific Configuration</h3>

<p>You can specify configurations per model for database selection and to
map a model to a different document:</p>

<p><em>common/models/_model-name_.json</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "name": "User",
  "base": "PersistedModel",
  "idInjection": true,
  ...
  "cloudant": {
    "modelIndex": "custom_doc_type_property_name",
    "modelSelector": { "doc_type": "user" },
    "database": "test2"
  },
  ...
</code></pre></div></div>

<p>Model-specific configuration settings:</p>

<table>
  <thead>
    <tr>
      <th>Property       </th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>database</td>
      <td>String</td>
      <td>Database name</td>
    </tr>
    <tr>
      <td>modelIndex</td>
      <td>String</td>
      <td>Specify the model name to document mapping, defaults to <code class="language-plaintext highlighter-rouge">loopback__model__name</code>.</td>
    </tr>
    <tr>
      <td>modelSelector</td>
      <td>JSON</td>
      <td>Use the Cloudant Query selector syntax to associate models to existing data. NOTE: modelSelector and modelIndex are mutually exclusive; see <a href="https://docs.cloudant.com/cloudant_query.html#selector-syntax">Selector syntax</a>.</td>
    </tr>
  </tbody>
</table>

<h3 id="_rev-property">_rev Property</h3>

<p>In a document, property <code class="language-plaintext highlighter-rouge">_rev</code> is the latest doc revision and must be provided when modifying the doc.</p>

<p>Our connector allows the user to retrieve back the <code class="language-plaintext highlighter-rouge">_rev</code> property upon all CRUD operations, however does not add it to the model definition.</p>

<p>If you would like to have a <code class="language-plaintext highlighter-rouge">_rev</code> property on your model, as an end user, the onus is on you to add the property in the model definition.</p>

<p><strong>Note:</strong> All CRUD operations require <code class="language-plaintext highlighter-rouge">_rev</code> (except create) and <strong>it is up to the user to specify them</strong>. The connector does not handle such cases due to possibilities of race condition when two users try to update the same document.</p>

<h4 id="example-crud-operations-with-_rev">Example CRUD operations with <code class="language-plaintext highlighter-rouge">_rev</code></h4>

<p><code class="language-plaintext highlighter-rouge">model.json</code></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">...</span><span class="w"> 
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_rev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>Create</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">create</span><span class="p">([{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Foo</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bar</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Created instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div></div>

<p><strong>Note:</strong> Cloudant does not allow customized <code class="language-plaintext highlighter-rouge">_rev</code> value, hence creating an instance with a <code class="language-plaintext highlighter-rouge">_rev</code> value will not give the expected result (i.e Cloudant’s CREATE operation ignores the <code class="language-plaintext highlighter-rouge">_rev</code> value when provided and generates a random unique one). The onus is on the user if they fail to comply to this rule.</p>

<p>Let’s say we have an instance in the database:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"_rev"</span><span class="p">:</span><span class="s2">"2-abcedf"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Bar"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>
    <p>Find</p>

    <ul>
      <li>find</li>
    </ul>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Found all instances: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>    </div>

    <ul>
      <li>findById</li>
    </ul>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Found instance with id: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Replace</p>

    <ul>
      <li>replaceOrCreate</li>
    </ul>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">replaceOrCreate</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">_rev</span><span class="p">:</span><span class="dl">'</span><span class="s1">2-abcedf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Bar2</span><span class="dl">'</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Replace an existing instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>    </div>

    <ul>
      <li>replaceById</li>
    </ul>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">replaceById</span><span class="p">(</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">_rev</span><span class="p">:</span><span class="dl">'</span><span class="s1">2-abcedf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Bar3</span><span class="dl">'</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Replace an existing instance with id: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Update</p>

    <ul>
      <li>updateOrCreate</li>
    </ul>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">updateOrCreate</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">_rev</span><span class="p">:</span><span class="dl">'</span><span class="s1">2-abcedf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Bar4</span><span class="dl">'</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update an existing instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>    </div>

    <ul>
      <li>
        <p>update/updateAll</p>

        <ul>
          <li>with <code class="language-plaintext highlighter-rouge">_rev</code> property
            <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">updateAll</span><span class="p">({</span>
    <span class="na">_rev</span><span class="p">:</span><span class="dl">'</span><span class="s1">2-abcedf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Bar4</span><span class="dl">'</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bar4-updated</span><span class="dl">'</span><span class="p">,</span> <span class="na">_rev</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2-abcedf</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update an existing instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>            </div>
          </li>
          <li>without <code class="language-plaintext highlighter-rouge">_rev</code> property
            <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">Model</span><span class="p">.</span><span class="nx">updateAll</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Bar4</span><span class="dl">'</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bar4-updated</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update an existing instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h1 id="force-id">Force Id</h1>

<p>In loopback <code class="language-plaintext highlighter-rouge">forceId</code> means user can specify the value of the primary key when creating a model instance, instead of using an auto-generated one. Learn more about LoopBack’s <a href="https://loopback.io/doc/ja/lb3/Model-definition-JSON-file.html">forceId</a>.</p>

<p>We recommend user to be careful when creating customized model id instead of using the auto-generated one because data belonging to different models can interfere with each other.</p>

<p>Every document stored in Cloudant has an unique id, stored as <code class="language-plaintext highlighter-rouge">_id</code>, and the database has built-in index for it. Retrieving data by its <code class="language-plaintext highlighter-rouge">_id</code> gives a better performance than querying by other field. Therefore, the connector always assign the <code class="language-plaintext highlighter-rouge">_id</code> field as the loopback model’s primary key.</p>

<p>If you have two models that allow customized <code class="language-plaintext highlighter-rouge">_id</code> as primary key set with <code class="language-plaintext highlighter-rouge">"forceId": false</code> in the model definition, it could result in a document update conflict.</p>

<p>For example:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{_id: 'myid', loopback__model__name: 'Foo'}
{_id: 'myid', loopback__model__name: 'Bar'}
</code></pre></div></div>

<p>Here is an example of a case that would result in a document update conflict using <code class="language-plaintext highlighter-rouge">"forceId": false</code>:</p>

<h3 id="model-definitions">model-definitions</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Employee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PersistedModel"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"idInjection"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"forceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"validateUpsert"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"validations"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"relations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"acls"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Car"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PersistedModel"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"idInjection"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"forceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"validateUpsert"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"make"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"model"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"validations"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"relations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"acls"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="boot-script">boot-script</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">lodash</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">datasources</span><span class="p">.</span><span class="nx">cloudantDs</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">Employee</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">Employee</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">Car</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">Car</span><span class="p">;</span>

  <span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">connected</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">automigrate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="s1">Automigrate completed</span><span class="dl">'</span><span class="p">);</span>

      <span class="nx">Employee</span><span class="p">.</span><span class="nx">create</span><span class="p">([{</span>
        <span class="na">_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Foo</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="na">_id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bar</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="s1">Created employee instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">util</span><span class="p">.</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>

        <span class="nx">Car</span><span class="p">.</span><span class="nx">create</span><span class="p">([{</span>
          <span class="na">_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">make</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Toyota</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span> <span class="p">{</span>
          <span class="na">_id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BMW</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="s1">Created car instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">util</span><span class="p">.</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Running the above script will throw a document update conflict because there exists a model instance with <code class="language-plaintext highlighter-rouge">_id</code> value of 1 and 2.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Web server listening at: http://localhost:3000
Browse your REST API at http://localhost:3000/explorer

Automigrate completed
Created employee instance: <span class="o">[</span> <span class="o">{</span> _id: <span class="s1">'1'</span>, name: <span class="s1">'Foo'</span> <span class="o">}</span>, <span class="o">{</span> _id: <span class="s1">'2'</span>, name: <span class="s1">'Bar'</span> <span class="o">}</span> <span class="o">]</span>

/Users/ssh/workspace/sandbox/loopback-sandbox/apps/cloudant/cloudant-forceId-app/server/boot/script.js:33
          <span class="k">if</span> <span class="o">(</span>err<span class="o">)</span> throw err<span class="p">;</span>
                   ^
Error: Document update conflict. <span class="o">(</span>duplicate?<span class="o">)</span>,Error: Document update conflict. <span class="o">(</span>duplicate?<span class="o">)</span>
</code></pre></div></div>

<p>In order to avoid this pitfall, please set <code class="language-plaintext highlighter-rouge">"forceId": true</code> on either of the model definition which would allow one of the models to have an auto-generated id or do not set <code class="language-plaintext highlighter-rouge">"forceId": false</code> on either of the model definitions.</p>

<h1 id="setup-cloudant-instance">Setup Cloudant Instance</h1>

<p>For user that don’t have a cloudant server to develop or test, here are some suggestions can help you quickly setup one.</p>

<p>For development use, a docker container of Cloudant local is easy to setup and there is no request limit per second.</p>

<p>Bluemix Cloudant will be more stable for production.</p>

<ul>
  <li>
    <p>Cloudant local (docker image)</p>

    <ul>
      <li>No request limit.</li>
      <li>Please follow https://hub.docker.com/r/ibmcom/cloudant-developer/ to create your Cloudant local instance</li>
    </ul>
  </li>
  <li>
    <p>Cloudant on Bluemix</p>

    <ul>
      <li>Limit request per second by default.</li>
      <li>
        <p>Choose Bluemix Cloudant if you already have a Bluemix account with a better situation than limited-days’ free trial.</p>
      </li>
      <li>
        <p>Setup steps:</p>

        <ol>
          <li>Open Bluemix console: https://console.ng.bluemix.net</li>
          <li>Login with your account.</li>
          <li>Click on “CATALOG” in navigation bar.</li>
          <li>Search with keyword “cloudant” and choose the “Cloudant NOSQLDB” under “Data and Analytics”.</li>
          <li>Click on the green button “create” in the popup page to create your Cloudant database.</li>
          <li>Go to “DASHBOARD” where you will see your new Cloudant DB icon under “Services”.</li>
          <li>Click on the icon, and it will direct you to the database page. Check “Service Credentials” on the left to see your credentials.</li>
          <li>Check “Manage” then click on button “LAUNCH” to see your Cloudant dashboard.</li>
        </ol>
      </li>
    </ul>
  </li>
  <li>
    <p>Cloudant DBaaS account</p>

    <ul>
      <li>Limit request per second.</li>
      <li>Limited free trial.</li>
      <li>Sign up with https://cloudant.com/sign-up/ then you will see your Cloudant dashboard.</li>
    </ul>
  </li>
</ul>

<p>To view the Cloudant dashboard on both DBaaS and Bluemix, <a href="https://cloudant.com/sign-in/">sign in</a> with your Cloudant username and password.</p>

<h1 id="installation">Installation</h1>

<p>Enter the following in the top-level directory of your LoopBack application:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install loopback-connector-cloudant --save
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--save</code> option adds the dependency to the application’s <code class="language-plaintext highlighter-rouge">package.json</code> file.</p>

<h1 id="configuration">Configuration</h1>

<h2 id="generate-datasource">Generate Datasource</h2>

<p>Use the <a href="http://loopback.io/doc/ja/lb3/Data-source-generator.html">Data source generator</a> to add the Cloudant data source to your
application. The entry in the applications <code class="language-plaintext highlighter-rouge">/server/datasources.json</code> will
look something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mydb": {
  "name": "mydb",
  "connector": "cloudant",
  "url": "https://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;"
  "database": "test"
}
</code></pre></div></div>
<p>or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mydb": {
  "name": "mydb",
  "connector": "cloudant",
  "username": "XXXX-bluemix",
  "password": "YYYYYYYYYYYY",
  "database": "test"
}
</code></pre></div></div>

<h2 id="datasource-config">Datasource Config</h2>

<h3 id="url-vs-username--password"><code class="language-plaintext highlighter-rouge">url</code> vs <code class="language-plaintext highlighter-rouge">username</code> &amp; <code class="language-plaintext highlighter-rouge">password</code></h3>
<ul>
  <li>
    <p><em>NOTE: The <code class="language-plaintext highlighter-rouge">url</code> property will override <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code>.</em></p>
  </li>
  <li>
    <p>It means only when missing <code class="language-plaintext highlighter-rouge">url</code>, cloudant will use <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> to create connection.</p>
  </li>
  <li>
    <p>If <code class="language-plaintext highlighter-rouge">url</code> is wrong, even user provide correct <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code>, the connection still fails.</p>
  </li>
  <li>
    <p>Only specify the <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> fields if you are using the root/admin user for the Cloudant server which has the same
string as the hostname for the Cloudant server, because the Cloudant driver used by the connector appends <code class="language-plaintext highlighter-rouge">.cloudant.com</code> to the
<code class="language-plaintext highlighter-rouge">username</code> field when <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> fields are specified. Therefore, it is good practice to use the <code class="language-plaintext highlighter-rouge">url</code> field instead
of <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> if your host is not <code class="language-plaintext highlighter-rouge">username.cloudant.com</code>.</p>
  </li>
  <li>
    <p>Edit <code class="language-plaintext highlighter-rouge">datasources.json</code> to add other supported properties as required:</p>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>database</td>
      <td>String</td>
      <td>Database name</td>
    </tr>
    <tr>
      <td>username</td>
      <td>String</td>
      <td>Cloudant username, use either ‘url’ or username/password</td>
    </tr>
    <tr>
      <td>password</td>
      <td>String</td>
      <td>Cloudant password</td>
    </tr>
    <tr>
      <td>url</td>
      <td>String</td>
      <td>Cloudant URL containing both username and password</td>
    </tr>
    <tr>
      <td>modelIndex</td>
      <td>String</td>
      <td>Specify the model name to document mapping, defaults to <code class="language-plaintext highlighter-rouge">loopback__model__name</code></td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-configuration">Advanced configuration</h3>
<p>Besides the basic configuration properties, user can provide advanced configuration information, for example proxy, in <code class="language-plaintext highlighter-rouge">requestDefaults</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mydb": {
  "name": "mydb",
  "connector": "cloudant",
  "url": "https://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;"
  "database": "test",
  "requestDefaults": {"proxy": "http://localhost:8080"}
}
</code></pre></div></div>

<p>For details, refer to the <a href="https://github.com/cloudant/nodejs-cloudant#advanced-configuration">driver(nodejs-cloudant) document</a></p>

<h3 id="requests-plugin">Requests Plugin</h3>

<p>User can provide plugin name and parameters in datasource object. For example, connect to a Cloudant server with plugin called <code class="language-plaintext highlighter-rouge">retry</code>, with parameters <code class="language-plaintext highlighter-rouge">retryAttempts</code> and <code class="language-plaintext highlighter-rouge">retryTimeout</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mydb": {
  "name": "mydb",
  "connector": "cloudant",
  "url": "https://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;"
  "database": "test",
  "plugin": "retry",
  "retryAttempts": 5,
  "retryTimeout": 1000
}
</code></pre></div></div>

<p>Please note user can only use one of the plugins list in Cloudant driver’s doc, not multiple:
https://github.com/cloudant/nodejs-cloudant#request-plugins</p>

<h2 id="example-usage">Example Usage</h2>

<p><em>/server/script.js</em></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Here we create datasource dynamically.</span>
<span class="c1">// If you already define a static datasource in server/datasources.json,</span>
<span class="c1">// please check how to load it in </span>
<span class="c1">// https://github.com/cloudant/nodejs-cloudant#example-code</span>
<span class="kd">var</span> <span class="nx">DataSource</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="dl">'</span><span class="s1">loopback-datasource-juggler</span><span class="dl">'</span><span class="p">).</span><span class="nx">DataSource</span><span class="p">,</span>
    <span class="nx">Cloudant</span>   <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="dl">'</span><span class="s1">loopback-connector-cloudant</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">your_cloudant_username</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">your_cloudant_password</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">'</span><span class="s1">your_cloudant_database</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DataSource</span> <span class="p">(</span><span class="nx">Cloudant</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>

<span class="nx">Test</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">define</span> <span class="p">(</span><span class="dl">'</span><span class="s1">Test</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span> <span class="p">},</span>
<span class="p">});</span>

<span class="c1">// wait for connected event on the</span>
<span class="c1">// datasource before doing any database</span>
<span class="c1">// operations since we connect asynchronously</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">connected</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">Test</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Tony</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">create instance </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">util</span><span class="p">.</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">Test</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Tony</span><span class="dl">"</span> <span class="p">}});</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">find instance: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">util</span><span class="p">.</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">Test</span><span class="p">.</span><span class="nx">destroyAll</span><span class="p">();</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">destroy instance!</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li>Use different DB instances per model definition. Refer to https://github.com/strongloop/loopback-connector-cloudant/blob/master/doc/multiple-db-instances.md</li>
</ul>

<h1 id="crud">CRUD</h1>

<p>User can find most CRUD operation apis documented in https://loopback.io/doc/ja/lb3/Built-in-models-REST-API.html</p>

<p>We are still in progress of refactoring some methods, more details to be updated.</p>

<h2 id="update">Update</h2>

<p>Currently <code class="language-plaintext highlighter-rouge">update</code> does the same thing as <code class="language-plaintext highlighter-rouge">replace</code>, for details, refer to https://github.com/strongloop/loopback-connector-cloudant#no-partial-update</p>

<h1 id="migration">Migration</h1>

<p>After attaching a model to a Cloudant datasource, either statically with <code class="language-plaintext highlighter-rouge">model.json</code> file or dynamically in boot script code, user need to run <code class="language-plaintext highlighter-rouge">automigrate</code> or <code class="language-plaintext highlighter-rouge">autoupdate</code> to migrate models to database. Cloudant connector does NOT automatically migrate them.</p>

<p>The following migration functions take either an array of multiple model’s name, or a string of a single model’s name. The example code will show how to do it.</p>

<h2 id="autoupdate-vs-automigrate">autoupdate vs automigrate</h2>

<p><code class="language-plaintext highlighter-rouge">autoupdate</code> does not destroy existing model instances if model already defined in database. It only creates design document for new models. 
Under the hood Cloudant allows creating same design doc multiple times, it doesn’t return error, but returns <code class="language-plaintext highlighter-rouge">existed</code> as result to tell is it a new design doc or existing one.</p>

<p><code class="language-plaintext highlighter-rouge">automigrate</code> destroys existing model instances if model already defined in database. Please make sure you do want to clean up data before running <code class="language-plaintext highlighter-rouge">automigrate</code>. Then it does same thing as <code class="language-plaintext highlighter-rouge">autoupdate</code></p>

<h2 id="isactual">isActual</h2>

<p>User can call this function to check if model exists in database.</p>

<h2 id="example-code">Example Code</h2>

<p><em>/server/script.js</em></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="k">export</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">migrateData</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Suppose you already define a datasource called `cloudantDS` </span>
  <span class="c1">// in server/datasources.json</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">datasources</span><span class="p">.</span><span class="nx">cloudantDS</span><span class="p">;</span>
  
  <span class="c1">// static model created with model.json file</span>
  <span class="kd">var</span> <span class="nx">StaticModel</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">StaticModel</span><span class="p">;</span>
  <span class="c1">// dynamic model created in boot script</span>
  <span class="kd">var</span> <span class="nx">DynamicModel</span> <span class="o">=</span> <span class="nx">ds</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">'</span><span class="s1">DynamicModel</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">},</span>
      <span class="na">description</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">},</span>
  <span class="p">});</span>

  <span class="c1">// Write the three examples in parallel just to avoid dup code,</span>
  <span class="c1">// please try ONLY ONE of them at one time.</span>
  <span class="nx">ds</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">connected</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// try autoupdate example - multiple models</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">autoupdate</span><span class="p">([</span><span class="dl">'</span><span class="s1">StaticModel</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DynamicModel</span><span class="dl">'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{});</span>
    <span class="c1">// OR</span>
    <span class="c1">// try automigrate example - single model</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">automigrate</span><span class="p">(</span><span class="dl">'</span><span class="s1">StaticModel</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{});</span>
    <span class="c1">// OR</span>
    <span class="c1">// try isActual example - if any model exist, run autoupdate, otherwise automigrate</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">isActual</span><span class="p">([</span><span class="dl">'</span><span class="s1">StaticModel</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DynamicModel</span><span class="dl">'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">exist</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">exist</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ds</span><span class="p">.</span><span class="nx">autoupdate</span><span class="p">([</span><span class="dl">'</span><span class="s1">StaticModel</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DynamicModel</span><span class="dl">'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){})</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">ds</span><span class="p">.</span><span class="nx">automigate</span><span class="p">([</span><span class="dl">'</span><span class="s1">StaticModel</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DynamicModel</span><span class="dl">'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="discovery">Discovery</h1>

<p>Not implemented yet, track it in story https://github.com/strongloop/loopback-connector-cloudant/issues/118</p>

<h1 id="query">Query</h1>

<ul>
  <li>Uses Cloudant Query (Lucene) to support ad-hoc searching.</li>
  <li><a href="http://loopback.io/doc/ja/lb3/Querying-data.html">LoopBack query</a> support for: fields, limit, order, skip and where filters.</li>
  <li>Please check <a href="https://github.com/strongloop/loopback-connector-cloudant/blob/master/doc/advanced-queries.md">Advanced Queries</a> for details about regex filter, nested filter and order.</li>
</ul>

<h1 id="view">View</h1>

<p>Given a design doc name and the view name in it, user can use a connector level function <code class="language-plaintext highlighter-rouge">viewDocs</code> to query the view.</p>

<p>Since <code class="language-plaintext highlighter-rouge">viewDocs</code> is a specific api for Cloudant connector only, it is not attached to the dataSource Object defined in loopback-datasource-juggler, which means the correct way to call it is <code class="language-plaintext highlighter-rouge">ds.connector.viewDocs</code>:</p>

<p><em>/server/script.js</em></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get Cloudant dataSource as `ds`</span>
  <span class="c1">// 'cloudantDB' is the name of Cloudant datasource created in </span>
  <span class="c1">// 'server/datasources.json' file</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="nx">server</span><span class="p">.</span><span class="nx">datasources</span><span class="p">.</span><span class="nx">cloudantDB</span><span class="p">;</span>

  <span class="nx">ds</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">connected</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 1. Please note `ds.connector.viewDocs()` is the correct way to call it,</span>
    <span class="c1">// NOT `ds.viewDocs()`</span>
    <span class="c1">// 2. This api matches the Cloudant endpoint:</span>
    <span class="c1">// GET /db/_design/&lt;design-doc&gt;/_view/&lt;view-name&gt;</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">connector</span><span class="p">.</span><span class="nx">viewDocs</span><span class="p">(</span><span class="dl">'</span><span class="s1">design_doc</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">view_name</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// `results` would be the data returned by quering that view</span>
    <span class="p">});</span>

    <span class="c1">// Alternatively user can also specify the filter for view query</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">connector</span><span class="p">.</span><span class="nx">viewDocs</span><span class="p">(</span><span class="dl">'</span><span class="s1">design_doc</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">view_name</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">filter</span><span class="dl">'</span><span class="p">},</span> 
      <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{});</span>
  <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div>

<h1 id="bulk-replace">Bulk replace</h1>

<p>Given an array of data to be updated, Cloudant supports the idea of performing bulk replace on a model instance. Please note, unlike other CRUD operations, bulk replace does not invoke any operation hooks.</p>

<p><strong>Note:</strong> To perform bulk replace, each data in the array data set needs to have the <code class="language-plaintext highlighter-rouge">id</code> and <code class="language-plaintext highlighter-rouge">_rev</code> property corresponding to the documents <code class="language-plaintext highlighter-rouge">id</code> and <code class="language-plaintext highlighter-rouge">_rev</code> property in the database.</p>

<p>Example:</p>

<pre><code class="language-server/boot/script.js```">
```javascript
var dataToCreate = [
  {id: 1, name: 'Foo', age: 1},
  {id: 2, name: 'Bar', age: 1},
  {id: 3, name: 'Baz', age: 2},
  {id: 4, name: 'A', age: 4},
  {id: 5, name: 'B', age: 5},
  {id: 6, name: 'C', age: 6},
  {id: 7, name: 'D', age: 7},
  {id: 8, name: 'E', age: 8},
 ];
var dataToUpdate = [
 {id: 1, name: 'Foo-change', age: 11},
 {id: 5, name: 'B-change', age: 51},
 {id: 8, name: 'E-change', age: 91}
];

module.exports = function(app) {
  var db = app.dataSources.cloudantDS;
  var Employee = app.models.Employee;

  db.once('connected', function() {
    db.automigrate(function(err) {
      if (err) throw err;

      Employee.create(dataToCreate, function(err, result) {
        if (err) throw err;
        console.log('\nCreated instance: ' + JSON.stringify(result));

        dataToUpdate[0].id = result[0].id;
        dataToUpdate[0]._rev = result[0]._rev;
        dataToUpdate[1].id = result[4].id;
        dataToUpdate[1]._rev = result[4]._rev;
        dataToUpdate[2].id = result[7].id;
        dataToUpdate[2]._rev = result[7]._rev;

        // note: it is called `db.connector.bulkReplace`
        // rather than `Employee.bulkReplace`
        db.connector.bulkReplace('Employee', dataToUpdate, function(err, result) {
          if (err) throw err;

          console.log('\nBulk replace performed: ' + JSON.stringify(result));

          Employee.find(function(err, result) {
            if (err) throw err;

            console.log('\nFound all instances: ' + JSON.stringify(result));
          });
        });
      });
    });
  });
};
</code></pre>

<h1 id="testing">Testing</h1>

<ul>
  <li>
    <p>Cloudant local(docker image)</p>

    <ul>
      <li>url: given the dashboard address ‘http://myhost:8080/dashboard.html’, the connection url would be ‘http://admin:pass@myhost:8080’</li>
      <li>database: create your own database for testing</li>
    </ul>
  </li>
  <li>
    <p>Cloudant DBaaS account</p>

    <ul>
      <li>username: your sign up username</li>
      <li>password: your sign up password</li>
      <li>database: create your own database for testing</li>
    </ul>
  </li>
  <li>
    <p>Cloudant on Bluemix</p>

    <ul>
      <li>username: see services credentials</li>
      <li>password: see services credentials</li>
      <li>database: create your own database for testing</li>
    </ul>
  </li>
</ul>

<p>To run the tests:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CLOUDANT_URL=url CLOUDANT_DATABASE=database npm test
</code></pre></div></div>
<p>OR</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CLOUDANT_USERNAME=username CLOUDANT_PASSWORD=password CLOUDANT_DATABASE=database npm test
</code></pre></div></div>

<p>Currently the imported test cases from juggler doesn’t fit Cloudant connector, to skip them, set <code class="language-plaintext highlighter-rouge">CI=1</code> in command when run tests.</p>

<h3 id="docker">Docker</h3>
<ul>
  <li>Assuming you have <a href="https://docs.docker.com/engine/installation/">Docker</a> installed, run the following script which would spawn a Cloudant instance on your local:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>setup.sh &lt;HOST&gt; &lt;USER&gt; &lt;PASSWORD&gt; &lt;PORT&gt; &lt;DATABASE&gt;
</code></pre></div>    </div>
    <p>where <code class="language-plaintext highlighter-rouge">&lt;HOST&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;PORT&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;USER&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;PASSWORD&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;DATABASE&gt;</code> are optional parameters. The default values are <code class="language-plaintext highlighter-rouge">localhost</code>, <code class="language-plaintext highlighter-rouge">8080</code> <code class="language-plaintext highlighter-rouge">admin</code>, <code class="language-plaintext highlighter-rouge">pass</code> and <code class="language-plaintext highlighter-rouge">testdb</code> respectively.</p>
  </li>
  <li>Run the test:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run mocha
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="more-info">More Info</h1>
<p>For more detailed information regarding connector-specific functions and behaviour,
see the <a href="https://github.com/strongloop/loopback-connector-cloudant/tree/master/doc">docs section</a>.</p>

<h1 id="feature-backlog">Feature backlog</h1>

<ul>
  <li><a href="https://github.com/strongloop/loopback-connector-cloudant/issues/35">Partial update</a></li>
  <li><a href="https://github.com/strongloop/loopback-connector-cloudant/issues/118">Discovery</a></li>
  <li>Index-only model properties marked with index=true</li>
  <li>Configurable “view based” or JSON indexes. <a href="https://cloudant.com/blog/mango-json-vs-text-indexes">More Info»</a></li>
  <li><a href="https://github.com/strongloop/loopback-connector-cloudant/issues/104">Support uuid</a></li>
</ul>

<h2 id="index">Index</h2>

<p>To be updated</p>


    <div class="tags">
      
    </div>
</div>

<hr class="shaded"/>

<footer id="container">
            <div class="row">
                <div class="col-md-6 footer-left">
               &copy;2021 IBM / StrongLoop. All rights reserved. <br />
 Site last generated: Mar 22, 2021
              </div>
              <div class="col-md-6 footer-right">
                <p><img src="https://loopback.io/images/company_logo.png" alt="Company logo"/></p>
              </div>
            </div>
</footer>


        </div>
        <!-- /.row -->
</div>
<!-- /.container -->
    </div>
</body>

</html>
