<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="LoopBack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="LoopBack Atom Feed"><title data-react-helmet="true">LoopBack 4 November 2019 Milestone Update | LoopBack</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://loopback.io/blog/november-2019-milestone"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="LoopBack 4 November 2019 Milestone Update | LoopBack"><meta data-react-helmet="true" name="description" content="Originally published on strongloop.com"><meta data-react-helmet="true" property="og:description" content="Originally published on strongloop.com"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2019-12-05T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/jannyhou"><meta data-react-helmet="true" property="article:tag" content="Milestone update"><link data-react-helmet="true" rel="icon" href="/blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://loopback.io/blog/november-2019-milestone"><link data-react-helmet="true" rel="alternate" href="https://loopback.io/blog/november-2019-milestone" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://loopback.io/blog/november-2019-milestone" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.137bdc1f.css">
<link rel="preload" href="/blog/assets/js/runtime~main.8703c6fc.js" as="script">
<link rel="preload" href="/blog/assets/js/main.9d30cf11.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://loopback.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/blog/img/logo.svg" alt="LoopBack Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/blog/img/logo.svg" alt="LoopBack Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">LoopBack</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/loopbackio/loopback-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/new-home-for-the-loopback-blog">New Home for the LoopBack Blog</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/november-2020-milestone">LoopBack 4 November 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/october-2020-milestone">LoopBack 4 October 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-oct-slack-qa">Community Q&amp;A Monthly Digest - Oct 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2020-q3-overview">LoopBack 4 2020 Q3 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-lb3-eol">LoopBack 3 End-of-Life</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/september-2020-milestone">LoopBack 4 September 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-hacktoberfest">LoopBack is participating in Hacktoberfest 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-sept-slack-qa">Community Q&amp;A Monthly Digest - Sept 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/august-2020-milestone">LoopBack 4 August 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-community-contribution">Enriching LoopBack and its Community - You are Invited!</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-jul-slack-qa">Community Q&amp;A Monthly Digest - July 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/july-2020-milestone">LoopBack 4 July 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/switching-to-dco">Making Your Contribution Process Simpler - Switching from CLA to DCO</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-Jun-slack-qa">Community Q&amp;A Monthly Digest - Jun 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2020-q2-overview">LoopBack 4 2020 Q2 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/june-2020-milestone">LoopBack 4 June 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-may-slack-qa">Community Q&amp;A Monthly Digest - May 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-improve-looopback-performance-uuid">How We Improved LoopBack REST Performance by 45%</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/may-2020-milestone">LoopBack 4 May 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-share-repository-code">How to reuse custom LoopBack Repository code</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/express-to-loopback">LoopBack - Taking Express to the Next Level</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/april-2020-milestone">LoopBack 4 April 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-april-slack-qa">Community Q&amp;A Monthly Digest - April 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/model-to-rest-api-feature">Build REST APIs for CRUD operations from a model without coding</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2020-q1-overview">LoopBack 4 2020 Q1 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/march-2020-milestone">LoopBack 4 March 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/february-2020-milestone">LoopBack 4 February 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2020-goals">LoopBack - 2020 Goals and Focus</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/lb3-entered-maintenance-mode">LoopBack 3 has entered Maintenance LTS</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/january-2020-milestone">LoopBack 4 January 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback4-2019-q4-overview">LoopBack 4 2019 Q4 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/december-2019-milestone">LoopBack 4 December 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-2019-review">LoopBack 2019 Year in Review</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/november-2019-milestone">LoopBack 4 November 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/going-cloud-native-with-loopback-4">Going Cloud Native with LoopBack 4</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt7">Building an Online Game With LoopBack 4 - Wrap-Up (Part 7)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/cascon-evoke-2019">CASCONxEVOKE Conference Recap for LoopBack</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/october-2019-milestone">LoopBack 4 October 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/inclusion-of-related-models">LoopBack 4 Offers Inclusion of Related Models</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2019-q3-overview">LoopBack 4 2019 Q3 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/import-loopback-3-models-to-loopback-4">Import LoopBack 3 Models into a LoopBack 4 Project</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/september-2019-milestone">LoopBack 4 September 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/august-2019-milestone">LoopBack 4 August 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt6">Building an Online Game With LoopBack 4 - Front-end with React (Part 6)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback4-interceptors-part2">Learning LoopBack 4 Interceptors (Part 2) - Method Level and Class Level Interceptors</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-2019-api-award-api-middleware">Congratulations to LoopBack, Winner of 2019 API Award for API Middleware</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/july-2019-milestone">LoopBack 4 July 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback4-interceptors-part1">Learning LoopBack 4 Interceptors (Part 1) - Global Interceptors</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt5">Building an Online Game With LoopBack 4 - Deploying our Application to Kubernetes on IBM Cloud (Part 5)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2019-q2-overview">LoopBack 4 2019 Q2 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-june-2019-milestone">LoopBack 4 June 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-authentication-updates">What&#x27;s New in LoopBack 4 Authentication 2.0</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt4">Building an Online Game With LoopBack 4 - User Authentication and Role-Based Access Control (Part 4)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/migrate-from-loopback-3-to-loopback-4">Migrating from LoopBack 3 to LoopBack 4</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/may-2019-milestone">LoopBack 4 May 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt3">Building an Online Game With LoopBack 4 - Customizing APIs in Controller (Part 3)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-an-online-game-with-loopback-4-pt2">Building an Online Game With LoopBack 4, Part 2 - Generating Universally Unique ID and Managing Models Relationships</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/april-2019-milestone">LoopBack 4 April 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/building-online-game-with-loopback-4-pt1">Building an Online Game With LoopBack 4 (Part 1)</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback-4-2019-q1-overview">LoopBack 4 2019 Q1 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/march-2019-milestone">LoopBack 4 March 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/loopback4-javascript-experience">Experimenting with Plain JavaScript Programming in LoopBack 4</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/lb3-extended-lts">LoopBack 3 Receives Extended Long Term Support</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/february-2019-milestone">LoopBack 4 February 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/watch-meetup-quickly-build-apis-with-loopback">Watch Video from our Meetup - Quickly Build APIs with Existing Services and Data Using LoopBack!</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/create-dynamic-end-to-end-REST-APIs-with-loopback4">New Developer Page - Create Dynamic End-to-End REST APIs with LoopBack 4</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/january-2019-milestone">LoopBack 4 January 2019 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/meetup-quickly-build-apis-using-loopback">Meetup - Quickly Build APIs with Existing Services and Data Using LoopBack!</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/december-2018-milestone">LoopBack 4 December 2018 Milestone Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">LoopBack 4 November 2019 Milestone Update</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2019-12-05T00:00:00.000Z" itemprop="datePublished">December 5, 2019</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/jannyhou" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://avatars2.githubusercontent.com/u/12554153" alt="Janny Hou"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jannyhou" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Janny Hou</span></a></div><small class="avatar__subtitle" itemprop="description">LoopBack Maintainer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><em>Originally published on <a href="https://strongloop.com" target="_blank" rel="noopener noreferrer">strongloop.com</a></em></p><p>The LoopBack team greeted November with the CASCONxEVOKE conference in Toronto. CASCONxEVOKE is one of Canada&#x27;s largest combined academic, research and developer conferences. As its speakers and attendees, we had a booth with posters to advocate LoopBack, and also delivered a workshop about developing extensible LoopBack applications. You can check this <a href="https://strongloop.com/strongblog/cascon-evoke-2019/" target="_blank" rel="noopener noreferrer">blog</a> for more details. </p><p>For Q4 achievements, we finished 3 epics this month: <a href="https://github.com/strongloop/loopback-next/issues/1352" target="_blank" rel="noopener noreferrer">Inclusion of related models</a>, <a href="https://github.com/strongloop/loopback-next/issues/1054" target="_blank" rel="noopener noreferrer">Deployment guide in a cloud native environment</a> and <a href="https://github.com/strongloop/loopback-connector-cloudant/issues/219" target="_blank" rel="noopener noreferrer">Support partitioned database in Cloudant connector</a>, and significantly progressed in the Migration, Authentication &amp; Authorization epics.</p><p>Keep reading to learn about the recently added features!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="inclusion-of-related-models">Inclusion of Related Models<a class="hash-link" href="#inclusion-of-related-models" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="running-repository-tests-for-cloudant">Running Repository Tests for Cloudant<a class="hash-link" href="#running-repository-tests-for-cloudant" title="Direct link to heading">â€‹</a></h3><p>To ensure our relations test suites work against real databases, we&#x27;ve been adding different kinds of databases to our test environment. This month we added a new repository<code>@loopback/test-repository-cloudant</code> to run shared CRUD and relation tests on Cloudant. You can also set up docker instance easily with our setup script to test out your application. See <a href="https://github.com/strongloop/loopback-next/pull/3968" target="_blank" rel="noopener noreferrer">PR#3968</a> for more details and try it out if you&#x27;re interested.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="verifying-relation-type-in-metadata">Verifying Relation Type in Metadata<a class="hash-link" href="#verifying-relation-type-in-metadata" title="Direct link to heading">â€‹</a></h3><p>Besides supporting inclusion in queries, we now also set constraints to CRUD operations with navigational properties to avoid unexpected errors. For example, if you try to create an instance of TodoList with all Todos it has through the hasMany relation such as:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">todoListRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;my list 1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    todos</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;todo 1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> todoListId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;todo 1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> todoListId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// incorrect foreign key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Such requests might be problematic because they might contain incorrect primary key or foreign key. Therefore, with such concerns, request contains navigational properties will be rejected. <a href="https://github.com/strongloop/loopback-next/pull/4148" target="_blank" rel="noopener noreferrer">PR#4148</a> implements the verification for CRUD methods. </p><p>Additionally, in order to ensure that the correct metadata type is being using when it is resolved, we&#x27;ve added tests in <a href="https://github.com/strongloop/loopback-next/pull/4046/" target="_blank" rel="noopener noreferrer">PR#4046</a> and simplified our test setup.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="migration-from-loopback-3">Migration from LoopBack 3<a class="hash-link" href="#migration-from-loopback-3" title="Direct link to heading">â€‹</a></h2><p>We keep incrementally building the migration guide for LoopBack 3 users upgrading to LoopBack 4. In November, we added content for <a href="https://loopback.io/doc/en/lb4/migration-models-relations.html" target="_blank" rel="noopener noreferrer">migrating model relations</a>. We explained how to convert a relation defined in LoopBack 3 model JSON files into corresponding LoopBack 4 artifacts.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="authentication-and-authorization">Authentication and Authorization<a class="hash-link" href="#authentication-and-authorization" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-authorization-example-and-tutorial">Adding Authorization Example and Tutorial<a class="hash-link" href="#adding-authorization-example-and-tutorial" title="Direct link to heading">â€‹</a></h3><p>In <code>loopback4-example-shopping</code>, the <code>/users/{userId}/orders</code> endpoints are now secured by an authorization system. When a request comes in, the authentication module resolves the user profile and passes it to the authorization module. Then an interceptor retrieves the metadata from the decorated endpoint, and invokes registered authorizers to determine whether the user can perform the operation. We also have a documentation <a href="https://github.com/strongloop/loopback-next/pull/4185" target="_blank" rel="noopener noreferrer">PR</a> in progress that explains the usage of authorization module.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="refactoring-customer-credentials">Refactoring Customer Credentials<a class="hash-link" href="#refactoring-customer-credentials" title="Direct link to heading">â€‹</a></h3><p>In LoopBack 3.x, we store users&#x27; passwords together with user data in the same model (table), which opens a lot of security vulnerabilities to deal with. For example, when returning user data in HTTP response, the password property must be filtered out and when searching for users, the password must be excluded from the query.</p><p>Our example <a href="https://github.com/strongloop/loopback4-example-shopping" target="_blank" rel="noopener noreferrer">Shopping App</a> used to store user credentials together with other profile information too. In November, we refactored the domain model of our example app and extracted the password property into a new model <code>UserCredentials</code>. Beside the immediate benefits in increased security, this new domain model makes it easier to implement additional features in the future. For example: 2-factor authentication, and the password validation rule forbiding repeated use of the same password.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="context-improvement">Context Improvement<a class="hash-link" href="#context-improvement" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="inspect">Inspect<a class="hash-link" href="#inspect" title="Direct link to heading">â€‹</a></h3><p>In <a href="https://github.com/strongloop/loopback-next/pull/4193" target="_blank" rel="noopener noreferrer">PR#4193</a> we&#x27;ve improved the context/binding with an <code>inspect()</code> method for metadata dumping. <code>ctx.inspect()</code> can now be used to print out the context hierarchy in JSON. This is useful for troubleshooting and rendering in UI. An example snippet of calling the new function:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ctx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">inspect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="choosing-the-right-scope">Choosing the Right Scope<a class="hash-link" href="#choosing-the-right-scope" title="Direct link to heading">â€‹</a></h3><p>When creating a binding, you can configure the <code>scope</code> as <code>SINGLETON</code> or <code>TRANSIENT</code>. To know more about how to make the right choice based on requests, see the new documentation in <a href="https://loopback.io/doc/en/lb4/Binding.html#choose-the-right-scope" target="_blank" rel="noopener noreferrer">Choosing the right scope</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="service-decorator">@service Decorator<a class="hash-link" href="#service-decorator" title="Direct link to heading">â€‹</a></h3><p>A new shortcut decorator <code>@service</code> was introduced to inject an instance of a given service from a binding that matches the service interface. You can inject a service as follows:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">MyController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">MyService</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> myService</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">MyService</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>More details of its usage and explanation could be found in <a href="https://loopback.io/doc/en/lb4/Decorators_service.html" target="_blank" rel="noopener noreferrer">Service Decorator</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="receive-information-of-current-binding">Receive Information of Current Binding<a class="hash-link" href="#receive-information-of-current-binding" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/strongloop/loopback-next/pull/4121" target="_blank" rel="noopener noreferrer">PR#4121</a> allows a class or provider to receive its own binding information as follow:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">HelloController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// If the `bindingKey` is not specified, </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// the current binding from the resolution session is injected.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">inject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">binding</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> myBinding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Binding</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/hello&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">greet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Hello from </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation keyword" style="color:#00009f">this</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">myBinding</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">key</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="application-life-cycle">Application Life Cycle<a class="hash-link" href="#application-life-cycle" title="Direct link to heading">â€‹</a></h2><p>In <a href="https://github.com/strongloop/loopback-next/pull/4145" target="_blank" rel="noopener noreferrer">PR#4145</a> we improved states and introduced graceful shutdown for LoopBack applications.</p><p>Now an application&#x27;s states are classified as <em>stable</em> or <em>in process</em>. Operations can only be called at a stable state. Calling a different operation in an in-process state will throw an error. See <a href="https://loopback.io/doc/en/lb4/Life-cycle.html#application-states" target="_blank" rel="noopener noreferrer">Application states</a> for details.</p><p>The shutdown of application is now controllable by specifying an array of signals in the configuration. For example:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Application</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  shutdown</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signals</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;SIGINT&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Schedule some work such as a timer or database connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>When the application is running inside a terminal, it can respond to <code>Ctrl+C</code>, which sends <code>SIGINT</code> to the process. The application calls <code>stop</code> first before it exits with the captured signal. This gives you a better control when the LoopBack 4 application is running inside a managed container, such as a Kubernetes Pod. See <a href="https://loopback.io/doc/en/lb4/Life-cycle.html#graceful-shutdown" target="_blank" rel="noopener noreferrer">graceful-shutdown</a> for more details.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="partitioned-database-in-cloudant">Partitioned Database in Cloudant<a class="hash-link" href="#partitioned-database-in-cloudant" title="Direct link to heading">â€‹</a></h2><p>We&#x27;ve finished the <a href="https://github.com/strongloop/loopback-connector-cloudant/issues/219" target="_blank" rel="noopener noreferrer">Partitioned Database Epic</a> in <code>loopback-connector-cloudant</code> by supporting partitioned index, find, and property definition.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="creating-partitioned-index">Creating Partitioned Index<a class="hash-link" href="#creating-partitioned-index" title="Direct link to heading">â€‹</a></h3><p>To create partitioned indexes as the secondary optimization for Cloudant query, you can add index entry in your model configuration with <code>{partitioned: true}</code> like:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Product</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">define</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Product&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">forceId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">indexes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// create a partitioned index for frequently queried</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// fields like `name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&#x27;product_name_index&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">partitioned</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">keys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Learn more about its signature and usage in <a href="https://github.com/strongloop/loopback-connector-cloudant/blob/master/doc/partitioned-db.md#adding-partitioned-index" target="_blank" rel="noopener noreferrer">Adding Partitioned Index</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="partitioned-find">Partitioned Find<a class="hash-link" href="#partitioned-find" title="Direct link to heading">â€‹</a></h3><p>When the partition key is discovered in the query&#x27;s options or filter, <code>Model.find()</code> will invoke the underlying partitioned find to optimize the query. Here are two examples:</p><p>Specifying the partition key in the <code>options</code>: <code>Product.find({where: {name: &#x27;food&#x27;}}, {partitionKey: &#x27;toronto&#x27;});</code></p><p>Or defining a model property as the partition key field. So that the find method could infer the partition key from the query filter:</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Define `city` as the partition key field in model `Product`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Product</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">define</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Product&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// partition key field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">isPartitionKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// `Product.find()` will infer the partition key `toronto`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// from the filter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;toronto&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;food&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can learn more about the partitioned query in <a href="https://github.com/strongloop/loopback-connector-cloudant/blob/master/doc/partitioned-db.md#defining-partitioned-property-and-performing-partitioned-find" target="_blank" rel="noopener noreferrer">Performing Partitioned Find</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="build-improvements">Build Improvements<a class="hash-link" href="#build-improvements" title="Direct link to heading">â€‹</a></h2><p>We upgraded the version of TypeScript to 3.7.2. An application created by the new CLI module <code>^@loopback/cli@1.26.0</code> is able to use the latest TypeScript features such as <a href="https://github.com/strongloop/loopback-next/pull/4212" target="_blank" rel="noopener noreferrer">optional chaining</a> and <a href="https://github.com/strongloop/loopback-next/pull/4213" target="_blank" rel="noopener noreferrer">nullish coalescing</a>. A list of new features can be found in <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html" target="_blank" rel="noopener noreferrer">TypeScript&#x27;s release blog</a>.</p><p>Now, in the new generated application, the json configuration files are renamed from <code>*.datasource.json</code> to <code>*.datasource.config.json</code> to avoid generating declarations. Explanations see <a href="https://github.com/microsoft/TypeScript/issues/34761" target="_blank" rel="noopener noreferrer">TypeScript issue#34761</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="bug-fixes">Bug Fixes<a class="hash-link" href="#bug-fixes" title="Direct link to heading">â€‹</a></h2><ul><li><p><code>lb4 discover</code> should generate the correct type for property definition. Fixed by <a href="https://github.com/strongloop/loopback-next/pull/4143" target="_blank" rel="noopener noreferrer">PR#4143</a>.</p></li><li><p><code>@param.path.&lt;primitive_type&gt;</code> generated with <code>lb4 relation</code> considers Wrapper datatypes. Also fixed by <a href="https://github.com/strongloop/loopback-next/pull/4143" target="_blank" rel="noopener noreferrer">PR#4143</a>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="documentation-improvements">Documentation Improvements<a class="hash-link" href="#documentation-improvements" title="Direct link to heading">â€‹</a></h2><ul><li><p>We&#x27;ve added a series of tutorials to illustrate how LoopBack can be used as an enabler to build large-scale Node.js applications. If you want to have a deeper understanding of LoopBack and/or to build an application with great flexibility and extensibility, don&#x27;t miss <a href="https://loopback.io/doc/en/lb4/core-tutorial.html" target="_blank" rel="noopener noreferrer">this tutorial series</a>!</p></li><li><p>In <code>loopback-component-explorer</code>, we added a note in the <a href="https://github.com/strongloop/loopback-component-explorer#a-note-on-swagger-ui-vulnerabilities" target="_blank" rel="noopener noreferrer">README file</a> to explain why the module is not affected by the security vulnerabilities in <code>swagger-ui</code>.</p></li><li><p>We&#x27;ve added &quot;Boot&quot; and &quot;Advanced Topics&quot; to the core tutorial in <a href="https://loopback.io/doc/en/lb4/core-tutorial-part10.html" target="_blank" rel="noopener noreferrer">Advanced Recipes</a> and <a href="https://loopback.io/doc/en/lb4/core-tutorial-part9.html" target="_blank" rel="noopener noreferrer">Discover and load artifacts by convention</a>.</p></li><li><p>We&#x27;ve updated the steps of <a href="https://loopback.io/doc/en/lb4/todo-list-tutorial-relations.html" target="_blank" rel="noopener noreferrer">creating model relations</a> to use <code>lb4 relation</code> command in the TodoList tutorial.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="miscellaneous">Miscellaneous<a class="hash-link" href="#miscellaneous" title="Direct link to heading">â€‹</a></h2><ul><li><p>We added the <a href="https://loopback.io/doc/en/lb3/OpenAPI-connector.html" target="_blank" rel="noopener noreferrer">OpenAPI</a> and <a href="https://loopback.io/doc/en/lb3/gRPC-connector.html" target="_blank" rel="noopener noreferrer">gRPC</a> connectors to be a part of our available connectors in <a href="https://github.com/strongloop/loopback-workspace/pull/558" target="_blank" rel="noopener noreferrer">PR#558</a> and <a href="https://github.com/strongloop/loopback.io/pull/906" target="_blank" rel="noopener noreferrer">PR#906</a>. Now, when a user calls <code>lb4 datasource</code>, they will have OpenAPI and gRPC as options for the connector.</p></li><li><p>The <code>lb4 update</code> command runs against a LoopBack 4 project and checks dependencies against the installed <code>@loopback/cli</code>. Optionally, it updates the dependencies in <code>package.json</code>. Details can be found on page <a href="https://loopback.io/doc/en/lb4/Update-generator.html" target="_blank" rel="noopener noreferrer">Update generator</a>.</p></li><li><p>In <a href="https://github.com/strongloop/loopback-next/issues/3770" target="_blank" rel="noopener noreferrer">spike story#3770</a> we came up with a plan to support querying with nested filter in the API Explorer by re-designing the <code>@param.query.object()</code> decorator. The follow-up implementation story is tracked in <a href="https://github.com/strongloop/loopback-next/issues/2208" target="_blank" rel="noopener noreferrer">#2208</a>.</p></li><li><p>We fixed a bug in <code>loopback-datasource-juggler</code> where <code>applyDefaultOnWrites</code> was not being applied in nested objects and arrays. You can find the details in <a href="https://github.com/strongloop/loopback-datasource-juggler/pull/1797" target="_blank" rel="noopener noreferrer">PR#1797</a>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="community-contributions">Community Contributions<a class="hash-link" href="#community-contributions" title="Direct link to heading">â€‹</a></h2><p>Here are some of the highlighted contributions from the community: </p><ul><li><p>For the model definition created by running <code>lb4 openapi</code>, we fixed the JavaScript type mapping of <code>date</code> from <code>Date</code> to <code>string</code>. Details see <a href="https://github.com/strongloop/loopback-next/pull/4142" target="_blank" rel="noopener noreferrer">PR#142</a>.</p></li><li><p>A flag <code>useDefaultIdType</code> was introduced in <code>loopback-datasource-juggler</code> to preserve the user provided id(primary key) property against the one generated by connectors. Details see <a href="https://github.com/strongloop/loopback-datasource-juggler/pull/1783" target="_blank" rel="noopener noreferrer">PR#1783</a>.</p></li><li><p>We now reject the the promise properly for <code>create</code> and <code>replaceById</code> when model initialization has errors. Details see <a href="https://github.com/strongloop/loopback-datasource-juggler/pull/1790" target="_blank" rel="noopener noreferrer">PR#1790</a>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="whats-next">What&#x27;s Next?<a class="hash-link" href="#whats-next" title="Direct link to heading">â€‹</a></h2><p>If you&#x27;re interested in what we&#x27;re working on next, you can check out the <a href="https://github.com/strongloop/loopback-next/issues/4236" target="_blank" rel="noopener noreferrer">December Milestone</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="call-to-action">Call to Action<a class="hash-link" href="#call-to-action" title="Direct link to heading">â€‹</a></h2><p>LoopBack&#x27;s success depends on you. We appreciate your continuous support and engagement to make LoopBack even better and meaningful for your API creation experience. Here&#x27;s how you can join us and help the project:</p><ul><li><a href="https://github.com/strongloop/loopback-next/issues" target="_blank" rel="noopener noreferrer">Report issues</a>.</li><li><a href="https://github.com/strongloop/loopback-next/blob/master/docs/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contribute</a> code and documentation.</li><li><a href="https://github.com/strongloop/loopback-next/labels/good%20first%20issue" target="_blank" rel="noopener noreferrer">Open a pull request on one of our &quot;good first issues&quot;</a>.</li><li><a href="https://github.com/strongloop/loopback-next/issues/110" target="_blank" rel="noopener noreferrer">Join</a> our user group.</li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/milestone-update">Milestone update</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/loopbackio/loopback-blog/blog/2019/2019-12-05-november-milestone.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/loopback-2019-review"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">LoopBack 2019 Year in Review</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/going-cloud-native-with-loopback-4"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Going Cloud Native with LoopBack 4</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#inclusion-of-related-models" class="table-of-contents__link toc-highlight">Inclusion of Related Models</a><ul><li><a href="#running-repository-tests-for-cloudant" class="table-of-contents__link toc-highlight">Running Repository Tests for Cloudant</a></li><li><a href="#verifying-relation-type-in-metadata" class="table-of-contents__link toc-highlight">Verifying Relation Type in Metadata</a></li></ul></li><li><a href="#migration-from-loopback-3" class="table-of-contents__link toc-highlight">Migration from LoopBack 3</a></li><li><a href="#authentication-and-authorization" class="table-of-contents__link toc-highlight">Authentication and Authorization</a><ul><li><a href="#adding-authorization-example-and-tutorial" class="table-of-contents__link toc-highlight">Adding Authorization Example and Tutorial</a></li><li><a href="#refactoring-customer-credentials" class="table-of-contents__link toc-highlight">Refactoring Customer Credentials</a></li></ul></li><li><a href="#context-improvement" class="table-of-contents__link toc-highlight">Context Improvement</a><ul><li><a href="#inspect" class="table-of-contents__link toc-highlight">Inspect</a></li><li><a href="#choosing-the-right-scope" class="table-of-contents__link toc-highlight">Choosing the Right Scope</a></li><li><a href="#service-decorator" class="table-of-contents__link toc-highlight">@service Decorator</a></li><li><a href="#receive-information-of-current-binding" class="table-of-contents__link toc-highlight">Receive Information of Current Binding</a></li></ul></li><li><a href="#application-life-cycle" class="table-of-contents__link toc-highlight">Application Life Cycle</a></li><li><a href="#partitioned-database-in-cloudant" class="table-of-contents__link toc-highlight">Partitioned Database in Cloudant</a><ul><li><a href="#creating-partitioned-index" class="table-of-contents__link toc-highlight">Creating Partitioned Index</a></li><li><a href="#partitioned-find" class="table-of-contents__link toc-highlight">Partitioned Find</a></li></ul></li><li><a href="#build-improvements" class="table-of-contents__link toc-highlight">Build Improvements</a></li><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#documentation-improvements" class="table-of-contents__link toc-highlight">Documentation Improvements</a></li><li><a href="#miscellaneous" class="table-of-contents__link toc-highlight">Miscellaneous</a></li><li><a href="#community-contributions" class="table-of-contents__link toc-highlight">Community Contributions</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li><li><a href="#call-to-action" class="table-of-contents__link toc-highlight">Call to Action</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://loopback.io/doc/en/lb4" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://loopback.io/doc/en/lb4/apidocs.index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/strongloop" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack Workspace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/groups/5046525/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/loopbackio/loopback-next" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openjsf.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/blog/img/openjs_foundation-logo.svg" alt="OpenJS Foundation logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/blog/img/openjs_foundation-logo.svg" alt="OpenJS Foundation logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright"><p>Copyright <a href="https://openjsf.org">OpenJS Foundation</a> and LoopBack contributors. All rights reserved. The <a href="https://openjsf.org">OpenJS Foundation</a> has registered trademarks and uses trademarks.  For a list of trademarks of the <a href="https://openjsf.org">OpenJS Foundation</a>, please see our <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> and <a href="https://trademark-list.openjsf.org">Trademark List</a>.  Trademarks and logos not indicated on the <a href="https://trademark-list.openjsf.org">list of OpenJS Foundation trademarks</a> are trademarks&trade; or registered&reg; trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.</p>
        <p><a href="https://openjsf.org">The OpenJS Foundation</a> | <a href="https://terms-of-use.openjsf.org">Terms of Use</a> | <a href="https://privacy-policy.openjsf.org">Privacy Policy</a> | <a href="https://bylaws.openjsf.org">Bylaws</a> | <a href="https://code-of-conduct.openjsf.org">Code of Conduct</a> | <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> | <a href="https://trademark-list.openjsf.org">Trademark List</a> | <a href="https://www.linuxfoundation.org/cookies">Cookie Policy</a></p></div></div></div></footer></div>
<script src="/blog/assets/js/runtime~main.8703c6fc.js"></script>
<script src="/blog/assets/js/main.9d30cf11.js"></script>
</body>
</html>